<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hazelcast Hazelcast Documentation</title>
    <link rel="canonical" href="https://JakeSCahill.github.io/hazelcast/4.1/develop/hazelcast_clients.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/search.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-M267KFN"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','GTM-M267KFN')</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://JakeSCahill.github.io">Hazelcast Documentation</a>
        <div class="navbar-item">
          <input id="search-input" type="text" placeholder="Search docs">
        </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Hazelcast IMDG</a>
            <a class="navbar-item" href="#">Hazelcast Jet</a>
            <a class="navbar-item" href="#">Hazelcast Cloud</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Use cases</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Demos</a>
            <a class="navbar-item" href="#">GitHub</a>
            <a class="navbar-item" href="#">Community</a>
            <a class="navbar-item" href="#">Blog</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="hazelcast" data-version="4.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../hazelcast_overview.html">Hazelcast IMDG</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../hazelcast_overview.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../get-started/getting_started.html">Get Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../get-started/glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="hazelcast_clients.html">Develop Solutions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jcache.html">JCache</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="performance.html">Performance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="serialization.html">Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="striim_cdc.html">Striim Hot Cache</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="distributed_query.html">Distributed Query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="distributed_sql.html">Distributed SQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="distributed_events.html">Distributed Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="distributed_computing.html">Distributed Computing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploy/installing_upgrading.html">Deploy Clusters</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../deploy/starting_members_clients.html">Starting Members and Clients</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../deploy/setting_up_clusters.html">Setting Up Clusters</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../deploy/management.html">Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../deploy/security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../deploy/simulator.html">Hazelcast Simulator</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../deploy/wan.html">WAN Replication</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../deploy/network_partitioning.html">Network Partitioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../migrate/migration_guides.html">Migrate</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshoot/common_exception_types.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../reference/faq.html">Reference</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/dds.html">Distributed data structures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/system_properties.html">System properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/understanding_configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/phone_homes.html">Phone homes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/hazelcast_plugins.html">Plugins</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../contribute/extending_hazelcast.html">Contribute</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../contribute/licenses.html">Licenses</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../contribute/revision_history.html">Documentation changes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Hazelcast IMDG</span>
    <span class="version">4.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Hazelcast IMDG</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../hazelcast_overview.html">4.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Home</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../home/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../hazelcast_overview.html">Hazelcast IMDG</a></li>
    <li><a href="hazelcast_clients.html">Develop Solutions</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a class="git" href="file:///C:/Users/Jake%20Cahill/Documents/code-playground/docs/hazelcast-docs/modules/develop/pages/hazelcast_clients.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="_hazelcast_clients"><a class="anchor" href="#_hazelcast_clients"></a>Hazelcast Clients</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides information about Hazelcast&#8217;s client and language implementations,
which are listed below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#java-client">Java</a></p>
</li>
<li>
<p><a href="#c-client">C++</a></p>
</li>
<li>
<p><a href="#net-client">.NET</a></p>
</li>
<li>
<p><a href="#memcache-client">Memcache</a></p>
</li>
<li>
<p><a href="#rest-client">REST</a></p>
</li>
<li>
<p><a href="#node-js-client">Node.js</a></p>
</li>
<li>
<p><a href="#go-client">Go</a></p>
</li>
<li>
<p><a href="#python-client">Python</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Feature Comparison for Hazelcast Clients:</strong></p>
</div>
<div class="paragraph">
<p>See the <a href="https://hazelcast.org/clients-languages/" target="_blank" rel="noopener">feature comparison matrix</a>
to learn about the features implemented across the clients and language APIs.</p>
</div>
<div class="paragraph">
<p><strong>Code Samples:</strong></p>
</div>
<div class="paragraph">
<p>In the following client sections, you will find links to each client&#8217;s code samples.</p>
</div>
<div class="sect2">
<h3 id="java-client"><a class="anchor" href="#java-client"></a>Java Client</h3>
<div class="paragraph">
<p>The Java client is the most full featured Hazelcast native client.
It is offered both with Hazelcast IMDG and Hazelcast IMDG Enterprise.
The main idea behind the Java client is to provide the same Hazelcast
functionality by proxying each operation through a Hazelcast member.
It can access and change distributed data and it can listen to distributed
events of an already established Hazelcast cluster from another Java application.</p>
</div>
<div class="paragraph">
<p>Hundreds or even thousands of clients can be connected to the cluster.
By default, there are <code>core count * 20</code> threads on the server side that
handle all the requests, e.g., if the server has 4 cores, there will be 80 threads.</p>
</div>
<div class="paragraph">
<p>Imagine a trading application where all the trading data are stored and
managed in a Hazelcast cluster with tens of members. Swing/Web applications
at the traders' desktops can use clients to access and modify the data in the Hazelcast cluster.</p>
</div>
<div class="sect3">
<h4 id="_getting_started_with_java_client"><a class="anchor" href="#_getting_started_with_java_client"></a>Getting Started with Java Client</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You do not need to set a license key for your Java clients for which you want to
use Hazelcast IMDG Enterprise features. Hazelcast IMDG Enterprise license keys are
required only for members.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Simply include the <code>hazelcast.jar</code> dependency in your classpath to start using
the Hazelcast Java client. Once included, you can start using this client as if
you are using the Hazelcast API. The differences are discussed in the below sections.</p>
</div>
<div class="paragraph">
<p>If you prefer to use Maven, simply add the <code>hazelcast</code> dependency
to your <code>pom.xml</code>, which you may already have done to start using
Hazelcast IMDG:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;
    &lt;artifactId&gt;hazelcast&lt;/artifactId&gt;
    &lt;version&gt;4.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find Hazelcast Java client&#8217;s code samples <a href="https://github.com/hazelcast/hazelcast-code-samples/tree/master/clients" target="_blank" rel="noopener">here</a>.</p>
</div>
<div class="sect4">
<h5 id="_client_api"><a class="anchor" href="#_client_api"></a>Client API</h5>
<div class="paragraph">
<p>The first step is the configuration. You can configure the Java client declaratively or
programmatically. We use the programmatic approach for this section, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
clientConfig.setClusterName("dev");
clientConfig.getNetworkConfig().addAddress("10.90.0.1", "10.90.0.2:5702");</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="#configuring-java-client">Configuring Java Client section</a> for more information.</p>
</div>
<div class="paragraph">
<p>The second step is initializing the <code>HazelcastInstance</code> to be connected to the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>HazelcastInstance client = HazelcastClient.newHazelcastClient(clientConfig);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>This client interface is your gateway to access all Hazelcast distributed objects.</strong></p>
</div>
<div class="paragraph">
<p>Let&#8217;s create a map and populate it with some data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">IMap&lt;String, Customer&gt; mapCustomers = client.getMap("customers"); //creates the map proxy

mapCustomers.put("1", new Customer("Joe", "Smith"));
mapCustomers.put("2", new Customer("Ali", "Selam"));
mapCustomers.put("3", new Customer("Avi", "Noyan"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>As the final step, if and when you are done with your client, you can shut it down as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>client.shutdown();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code line releases all the used resources and closes connections to the cluster.</p>
</div>
</div>
<div class="sect4">
<h5 id="_java_client_operation_modes"><a class="anchor" href="#_java_client_operation_modes"></a>Java Client Operation Modes</h5>
<div class="paragraph">
<p>The client has two operation modes because of the distributed nature of the data and cluster.</p>
</div>
<div class="paragraph">
<p><strong>Smart Client</strong>: In the smart mode, the clients connect to each cluster member.
Since each data partition uses the well known and consistent hashing algorithm,
each client can send an operation to the relevant cluster member,
which increases the overall throughput and efficiency. Smart mode is the default mode.</p>
</div>
<div class="paragraph">
<p><strong>Unisocket Client</strong>: For some cases, the clients can be required to connect to
a single member instead of to each member in the cluster. Firewalls, security, or
some custom networking issues can be the reason for these cases.</p>
</div>
<div class="paragraph">
<p>In the unisocket client mode, the clients only connect to one of the configured addresses.
This single member behaves as a gateway to the other members.
For any operation requested from the client, it redirects the request to the relevant member and
returns the response back to the client returned from that member.</p>
</div>
</div>
<div class="sect4">
<h5 id="_handling_failures"><a class="anchor" href="#_handling_failures"></a>Handling Failures</h5>
<div class="paragraph">
<p>There are two main failure cases and configurations you can perform to achieve proper behavior.</p>
</div>
<div class="paragraph">
<p><strong>Handling Client Connection Failure:</strong></p>
</div>
<div class="paragraph">
<p>While the client is trying to connect initially to one of the members in the
<code>ClientNetworkConfig.addressList</code>, all the members might be not available.
Instead of giving up, throwing an exception and stopping the client,
the client retries to connect as configured which is described in the
<a href="#configuring-client-connection-retry">Configuring Client Connection Retry section</a>.</p>
</div>
<div class="paragraph">
<p>The client executes each operation through the already established connection to the cluster.
If this connection(s) disconnects or drops, the client tries to reconnect as configured.</p>
</div>
<div class="paragraph">
<p><strong>Handling Retry-able Operation Failure:</strong></p>
</div>
<div class="paragraph">
<p>While sending the requests to related members, operations can fail due to various reasons.
Read-only operations are retried by default. If you want to enable retry for the other operations,
you can set the <code>redoOperation</code> to <code>true</code>. See the <a href="#enabling-redo-operation">Enabling Redo Operation section</a>.</p>
</div>
<div class="paragraph">
<p>You can set a timeout for retrying the operations sent to a member.
This can be provided by using the property <code>hazelcast.client.invocation.timeout.seconds</code> in <code>ClientProperties</code>.
The client retries an operation within this given period, of course, if it is a read-only operation or
you enabled the <code>redoOperation</code> as stated in the above paragraph.
This timeout value is important when there is a failure resulted by either of the following causes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Member throws an exception.</p>
</li>
<li>
<p>Connection between the client and member is closed.</p>
</li>
<li>
<p>Client&#8217;s heartbeat requests are timed out.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See the <a href="#client-system-properties">Client System Properties section</a>
for the description of the <code>hazelcast.client.invocation.timeout.seconds</code> property.</p>
</div>
<div class="paragraph">
<p>When any failure happens between a client and member
(such as an exception on the member side or connection issues), an operation is retried if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it is certain that it has not run on the member yet</p>
</li>
<li>
<p>or if it is idempotent such as a read-only operation, i.e., retrying does not have a side effect.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If it is not certain whether the operation has run on the member,
then the non-idempotent operations are not retried.
However, as explained in the first paragraph of this section,
you can force all client operations to be retried (<code>redoOperation</code>)
when there is a failure between the client and member.
But in this case, you should know that some operations may run multiple times causing conflicts.
For example, assume that your client sent a <code>queue.offer</code> operation to the member and
then the connection is lost. Since there will be no respond for this operation,
you will not know whether it has run on the member or not. If you enabled <code>redoOperation</code>,
that <code>queue.offer</code> operation may rerun and this causes the same objects to be offered twice in the member&#8217;s queue.</p>
</div>
</div>
<div class="sect4">
<h5 id="_using_supported_distributed_data_structures"><a class="anchor" href="#_using_supported_distributed_data_structures"></a>Using Supported Distributed Data Structures</h5>
<div class="paragraph">
<p>Most of the Distributed Data Structures are supported by the Java client.
When you use clients in other languages, you should check for the exceptions.</p>
</div>
<div class="paragraph">
<p>As a general rule, you configure these data structures on the server side and
access them through a proxy on the client side.</p>
</div>
<div class="sect5">
<h6 id="_using_map_with_java_client"><a class="anchor" href="#_using_map_with_java_client"></a>Using Map with Java Client</h6>
<div class="paragraph">
<p>You can use any <a href="#map">Distributed Map</a> object with the client, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Imap&lt;Integer, String&gt; map = client.getMap("myMap");

map.put(1, "John");
String value= map.get(1);
map.remove(1);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Locality is ambiguous for the client, so <code>addLocalEntryListener</code> and
<code>localKeySet</code> are not supported. See the <a href="#map">Distributed Map section</a>
for more information.</p>
</div>
</div>
<div class="sect5">
<h6 id="_using_multimap_with_java_client"><a class="anchor" href="#_using_multimap_with_java_client"></a>Using MultiMap with Java Client</h6>
<div class="paragraph">
<p>A MultiMap usage example is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">MultiMap&lt;Integer, String&gt; multiMap = client.getMultiMap("myMultiMap");

multiMap.put(1,"John");
multiMap.put(1,"Mary");

Collection&lt;String&gt; values = multiMap.get(1);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>addLocalEntryListener</code>, <code>localKeySet</code> and <code>getLocalMultiMapStats</code> are not
supported because locality is ambiguous for the client.
See the <a href="#multimap">Distributed MultiMap section</a> for more information.</p>
</div>
</div>
<div class="sect5">
<h6 id="_using_queue_with_java_client"><a class="anchor" href="#_using_queue_with_java_client"></a>Using Queue with Java Client</h6>
<div class="paragraph">
<p>An example usage is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">IQueue&lt;String&gt; myQueue = client.getQueue("theQueue");
myQueue.offer("John")</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>getLocalQueueStats</code> is not supported because locality is ambiguous for the client.
See the <a href="#queue">Distributed Queue section</a> for more information.</p>
</div>
</div>
<div class="sect5">
<h6 id="_using_topic_with_java_client"><a class="anchor" href="#_using_topic_with_java_client"></a>Using Topic with Java Client</h6>
<div class="paragraph">
<p><code>getLocalTopicStats</code> is not supported because locality is ambiguous for the client.</p>
</div>
</div>
<div class="sect5">
<h6 id="_using_other_supported_distributed_structures"><a class="anchor" href="#_using_other_supported_distributed_structures"></a>Using Other Supported Distributed Structures</h6>
<div class="paragraph">
<p>The distributed data structures listed below are also supported by the client.
Since their logic is the same in both the member side and client side, you can see
their sections as listed below.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#replicated-map">Replicated Map</a></p>
</li>
<li>
<p><a href="#list">List</a></p>
</li>
<li>
<p><a href="#set">Set</a></p>
</li>
<li>
<p><a href="#iatomiclong">IAtomicLong</a></p>
</li>
<li>
<p><a href="#iatomicreference">IAtomicReference</a></p>
</li>
<li>
<p><a href="#icountdownlatch">ICountDownLatch</a></p>
</li>
<li>
<p><a href="#isemaphore">ISemaphore</a></p>
</li>
<li>
<p><a href="#flakeidgenerator">FlakeIdGenerator</a></p>
</li>
<li>
<p><a href="#lock">Lock</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_using_client_services"><a class="anchor" href="#_using_client_services"></a>Using Client Services</h5>
<div class="paragraph">
<p>Hazelcast provides the services discussed below for some common functionalities on the client side.</p>
</div>
<div class="sect5">
<h6 id="_using_distributed_executor_service"><a class="anchor" href="#_using_distributed_executor_service"></a>Using Distributed Executor Service</h6>
<div class="paragraph">
<p>The distributed executor service is for distributed computing.
It can be used to execute tasks on the cluster on a designated partition or on all the partitions.
It can also be used to process entries. See the <a href="#executor-service">Distributed Executor Service section</a> for more information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>IExecutorService executorService = client.getExecutorService("default");</code></pre>
</div>
</div>
<div class="paragraph">
<p>After getting an instance of <code>IExecutorService</code>, you can use the instance as
the interface with the one provided on the server side. See the
<a href="#distributed-computing">Distributed Computing chapter</a> for detailed usage.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This service is only supported by the Java client.
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_listening_to_client_connection"><a class="anchor" href="#_listening_to_client_connection"></a>Listening to Client Connection</h6>
<div class="paragraph">
<p>If you need to track clients and you want to listen to their connection events,
you can use the <code>clientConnected</code> and <code>clientDisconnected</code> methods of the <code>ClientService</code> class.
This class must be run on the <strong>member</strong> side. The following is an example code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        ClientConfig clientConfig = new ClientConfig();
        //clientConfig.setClusterName("dev");
        clientConfig.getNetworkConfig().addAddress("10.90.0.1", "10.90.0.2:5702");

        HazelcastInstance instance = Hazelcast.newHazelcastInstance();

        final ClientService clientService = instance.getClientService();

        clientService.addClientListener(new ClientListener() {
            @Override
            public void clientConnected(Client client) {
                //Handle client connected event
            }

            @Override
            public void clientDisconnected(Client client) {
                //Handle client disconnected event
            }
        });

        //this will trigger `clientConnected` event
        HazelcastInstance client = HazelcastClient.newHazelcastClient();

        final Collection&lt;Client&gt; connectedClients = clientService.getConnectedClients();

        //this will trigger `clientDisconnected` event
        client.shutdown();</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_finding_the_partition_of_a_key"><a class="anchor" href="#_finding_the_partition_of_a_key"></a>Finding the Partition of a Key</h6>
<div class="paragraph">
<p>You use partition service to find the partition of a key.
It returns all partitions. See the example code below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PartitionService partitionService = client.getPartitionService();

//partition of a key
Partition partition = partitionService.getPartition(key);

//all partitions
Set&lt;Partition&gt; partitions = partitionService.getPartitions();</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_handling_lifecycle"><a class="anchor" href="#_handling_lifecycle"></a>Handling Lifecycle</h6>
<div class="paragraph">
<p>Lifecycle handling performs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>checking if the client is running</p>
</li>
<li>
<p>shutting down the client gracefully</p>
</li>
<li>
<p>terminating the client ungracefully (forced shutdown)</p>
</li>
<li>
<p>adding/removing lifecycle listeners.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">LifecycleService lifecycleService = client.getLifecycleService();

if(lifecycleService.isRunning()){
    //it is running
}

//shutdown client gracefully
lifecycleService.shutdown();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_defining_client_labels"><a class="anchor" href="#_defining_client_labels"></a>Defining Client Labels</h5>
<div class="paragraph">
<p>You can define labels in your Java client, similar to the way it can
be done for the <a href="#defining-member-attributes">members</a>.
Through the client labels, you can assign special roles for your clients and
use these roles to perform some actions specific to those client connections.</p>
</div>
<div class="paragraph">
<p>You can also group your clients using the client labels.
These client groups can be blacklisted in the Hazelcast Management Center so that
they can be prevented from connecting to a cluster. See the related section in the
Hazelcast Management Center Reference Manual for more information on this topic.</p>
</div>
<div class="paragraph">
<p>Declaratively, you can define the client labels using the <code>client-labels</code>
configuration element. See the below example.</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;instance-name&gt;barClient&lt;/instance-name&gt;
    &lt;client-labels&gt;
        &lt;label&gt;user&lt;/label&gt;
        &lt;label&gt;bar&lt;/label&gt;
    &lt;/client-labels&gt;
    ....
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  instance-name: barClient
  client-labels:
    - user
    - bar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The equivalent programmatic approach is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
clientConfig.setInstanceName("ExampleClientName");
clientConfig.addLabel("user");
clientConfig.addLabel("bar");

HazelcastClient.newHazelcastClient(clientConfig);</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="https://github.com/hazelcast/hazelcast-code-samples/tree/master/clients/client-labels" target="_blank" rel="noopener">code sample</a>
for the client labels to see them in action.</p>
</div>
</div>
<div class="sect4">
<h5 id="_client_listeners"><a class="anchor" href="#_client_listeners"></a>Client Listeners</h5>
<div class="paragraph">
<p>You can configure listeners to listen to various event types on the client side.
You can configure global events not relating to any distributed object through
<a href="#configuring-client-listeners">Client ListenerConfig</a>.
You should configure distributed object listeners like map entry listeners or
list item listeners through their proxies. See the related sections under
each distributed data structure in this Reference Manual.</p>
</div>
</div>
<div class="sect4">
<h5 id="_client_transactions"><a class="anchor" href="#_client_transactions"></a>Client Transactions</h5>
<div class="paragraph">
<p>Transactional distributed objects are supported on the client side.
See the <a href="#transactions">Transactions chapter</a> on how to use them.</p>
</div>
</div>
<div class="sect4">
<h5 id="_async_start_and_reconnect_modes"><a class="anchor" href="#_async_start_and_reconnect_modes"></a>Async Start and Reconnect Modes</h5>
<div class="paragraph">
<p>Java client can be configured to connect to a cluster in an async manner during the
client start and reconnecting after a cluster disconnect.
Both of these options are configured via <code>ClientConnectionStrategyConfig</code>.</p>
</div>
<div class="paragraph">
<p>Async client start is configured by setting the configuration element <code>async-start</code> to <code>true</code>.
This configuration changes the behavior of <code>HazelcastClient.newHazelcastClient()</code> call.
It returns a client instance without waiting to establish a cluster connection.
Until the client connects to cluster, it throws <code>HazelcastClientOfflineException</code>
on any network dependent operations hence they won&#8217;t block.
If you want to check or wait the client to complete its cluster connection,
you can use the built-in lifecycle listener:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientStateListener clientStateListener = new ClientStateListener(clientConfig);
HazelcastInstance client = HazelcastClient.newHazelcastClient(clientConfig);

//Client started but may not be connected to cluster yet.

//check connection status
clientStateListener.isConnected();

//blocks until client completes connect to cluster
if (clientStateListener.awaitConnected()) {
	//connected successfully
} else {
	//client failed to connect to cluster
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Java client can also be configured to specify
how it reconnects after a cluster disconnection.
The following are the options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A client can reject to reconnect to the cluster and trigger the client shutdown process.</p>
</li>
<li>
<p>Client can open a connection to the cluster by blocking all waiting invocations.</p>
</li>
<li>
<p>Client can open a connection to the cluster without blocking the waiting invocations.
All invocations receive <code>HazelcastClientOfflineException</code> during the establishment of cluster connection.
If cluster connection is failed to connect, then client shutdown is triggered.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See the <a href="#java-client-connection-strategy">[java-client-connection-strategy]</a> section to learn how to configure
these.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_java_client"><a class="anchor" href="#_configuring_java_client"></a>Configuring Java Client</h4>
<div class="paragraph">
<p>You can configure Hazelcast Java Client declaratively (XML), programmatically (API), or
using client system properties.</p>
</div>
<div class="paragraph">
<p>For declarative configuration, the Hazelcast client looks at
the following places for the client configuration file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>System property</strong>: The client first checks if <code>hazelcast.client.config</code> system property is
set to a file path, e.g., <code>-Dhazelcast.client.config=C:/myhazelcast.xml</code>.</p>
</li>
<li>
<p><strong>Classpath</strong>: If config file is not set as a system property,
the client checks the classpath for <code>hazelcast-client.xml</code> file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the client does not find any configuration file, it starts with the default configuration
(<code>hazelcast-client-default.xml</code>) located in the <code>hazelcast.jar</code> library.
Before configuring the client, please try to work with the default configuration to see if
it works for you. The default should be just fine for most users.
If not, then consider custom configuration for your environment.</p>
</div>
<div class="paragraph">
<p>If you want to specify your own configuration file to create a <code>Config</code> object,
the Hazelcast client supports the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Config cfg = new XmlClientConfigBuilder(xmlFileName).build();</code></p>
</li>
<li>
<p><code>Config cfg = new XmlClientConfigBuilder(inputStream).build();</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For programmatic configuration of the Hazelcast Java Client, just instantiate a <code>ClientConfig</code> object and configure the desired aspects. An example is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
clientConfig.setClusterName("dev");
clientConfig.setLoadBalancer(yourLoadBalancer);</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_client_network"><a class="anchor" href="#_client_network"></a>Client Network</h5>
<div class="paragraph">
<p>All network related configuration of Hazelcast Java Client is performed via the
<code>network</code> element in the declarative configuration file, or in the class
<code>ClientNetworkConfig</code> when using programmatic configuration.
Let&#8217;s first give the examples for these two approaches.
Then we will look at its sub-elements and attributes.</p>
</div>
<div class="paragraph">
<p><strong>Declarative Configuration:</strong></p>
</div>
<div class="paragraph">
<p>Here is an example declarative configuration of <code>network</code> for Java Client,
which includes all the parent configuration elements.</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;network&gt;
        &lt;cluster-members&gt;
            &lt;address&gt;127.0.0.1&lt;/address&gt;
            &lt;address&gt;127.0.0.2&lt;/address&gt;
        &lt;/cluster-members&gt;
        &lt;outbound-ports&gt;
            &lt;ports&gt;34600&lt;/ports&gt;
            &lt;ports&gt;34700-34710&lt;/ports&gt;
        &lt;/outbound-ports&gt;
        &lt;smart-routing&gt;true&lt;/smart-routing&gt;
        &lt;redo-operation&gt;true&lt;/redo-operation&gt;
        &lt;connection-timeout&gt;60000&lt;/connection-timeout&gt;
        &lt;socket-options&gt;
            ...
        &lt;/socket-options&gt;
        &lt;socket-interceptor enabled="true"&gt;
            ...
        &lt;/socket-interceptor&gt;

        &lt;ssl enabled="false"&gt;
            ...
        &lt;/ssl&gt;
        &lt;aws enabled="true" connection-timeout-seconds="11"&gt;
            ...
        &lt;/aws&gt;
        &lt;gcp enabled="false"&gt;
            ...
        &lt;/gcp&gt;
        &lt;azure enabled="false"&gt;
            ...
        &lt;/azure&gt;
        &lt;kubernetes enabled="false"&gt;
            ...
        &lt;/kubernetes&gt;
        &lt;eureka enabled="false"&gt;
            ...
        &lt;/eureka&gt;
        &lt;icmp-ping enabled="false"&gt;
            ...
        &lt;/icmp-ping&gt;
        &lt;hazelcast-cloud enabled="false"&gt;
            &lt;discovery-token&gt;EXAMPLE_TOKEN&lt;/discovery-token&gt;
        &lt;/hazelcast-cloud&gt;
        &lt;discovery-strategies&gt;
            &lt;node-filter class="DummyFilterClass" /&gt;
            &lt;discovery-strategy class="DummyDiscoveryStrategy1" enabled="true"&gt;
                &lt;properties&gt;
                    &lt;property name="key-string"&gt;foo&lt;/property&gt;
                    &lt;property name="key-int"&gt;123&lt;/property&gt;
                    &lt;property name="key-boolean"&gt;true&lt;/property&gt;
                &lt;/properties&gt;
            &lt;/discovery-strategy&gt;
        &lt;/discovery-strategies&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">network:
    cluster-members:
      - 127.0.0.1
      - 127.0.0.2
    outbound-ports:
      - 34600
      - 34700-34710
    smart-routing: true
    redo-operation: true
    connection-timeout: 60000
    socket-options:
      ...
    socket-interceptor:
      ...
    ssl:
      enabled: false
      ...
    aws:
      enabled: true
      connection-timeout-seconds: 11
      ...
    gcp:
      enabled: false
      ...
    azure:
      enabled: false
      ...
    kubernetes:
      enabled: false
      ...
    eureka:
      enabled: false
      ...
    icmp-ping:
      enabled: false
      ...
    hazelcast-cloud:
      enabled: false
      discovery-token: EXAMPLE_TOKEN
    discovery-strategies:
      node-filter:
        class: DummyFilterClass
      discovery-strategies:
        - class: DummyDiscoveryStrategy1
          enabled: true
          properties:
            key-string: foo
            key-int: 123
            key-boolean: true</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic Configuration:</strong></p>
</div>
<div class="paragraph">
<p>Here is an example of configuring network for Java Client programmatically.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        ClientConfig clientConfig = new ClientConfig();
        clientConfig.getConnectionStrategyConfig().getConnectionRetryConfig().setMaxBackoffMillis(5000);
        ClientNetworkConfig networkConfig = clientConfig.getNetworkConfig();
        networkConfig.addAddress("10.1.1.21", "10.1.1.22:5703")
                .setSmartRouting(true)
                .addOutboundPortDefinition("34700-34710")
                .setRedoOperation(true)
                .setConnectionTimeout(5000);

        AwsConfig clientAwsConfig = new AwsConfig();
        clientAwsConfig.setProperty("access-key", "my-access-key")
                .setProperty("secret-key", "my-secret-key")
                .setProperty("region", "us-west-1")
                .setProperty("host-header", "ec2.amazonaws.com")
                .setProperty("security-group-name", "&gt;hazelcast-sg")
                .setProperty("tag-key", "type")
                .setProperty("tag-value", "hz-members")
                .setProperty("iam-role", "s3access")
                .setEnabled(true);
        clientConfig.getNetworkConfig().setAwsConfig(clientAwsConfig);
        HazelcastInstance client = HazelcastClient.newHazelcastClient(clientConfig);</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_configuring_backup_acknowledgment"><a class="anchor" href="#_configuring_backup_acknowledgment"></a>Configuring Backup Acknowledgment</h6>
<div class="paragraph">
<p>When an operation with sync backup is sent by a client to the Hazelcast member(s),
the acknowledgment of the operation&#8217;s backup is sent to the client by the backup
replica member(s). This improves the performance of the client operations.</p>
</div>
<div class="paragraph">
<p>By default, backup acknowledgement to the client is enabled for smart clients
(unisocket clients do not support it).</p>
</div>
<div class="paragraph">
<p>Here is an example of configuring the backup acknowledgement for Java Client declaratively.</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client ... &gt;
       &lt;backup-ack-to-client-enabled&gt;false&lt;/backup-ack-to-client-enabled&gt;
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  backup-ack-to-client: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is its equivalent programmatical configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">clientConfig.setBackupAckToClientEnabled(boolean enabled)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also fine tune this feature using the following system properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.client.operation.backup.timeout.millis</code>: If an operation has
backups, this property specifies how long (in milliseconds) the invocation waits
for acks from the backup replicas. If acks are not received from some
of the backups, there will not be any rollback on the other successful replicas.
Its default value is <code>5000</code> milliseconds.</p>
</li>
<li>
<p><code>hazelcast.client.operation.fail.on.indeterminate.state</code>: When it is <code>true</code>,
if an operation has sync backups and acks are not received from backup replicas
in time, or the member which owns primary replica of the target partition leaves
the cluster, then the invocation fails. However, even if the invocation fails,
there will not be any rollback on other successful replicas. It is default
value is <code>false</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_configuring_address_list"><a class="anchor" href="#_configuring_address_list"></a>Configuring Address List</h6>
<div class="paragraph">
<p>Address List is the initial list of cluster addresses to which the client will connect.
The client uses this list to find an alive member. Although it may be enough to give
only one address of a member in the cluster (since all members communicate with each other),
it is recommended that you give the addresses for all the members.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;network&gt;
        &lt;cluster-members&gt;
            &lt;address&gt;10.1.1.21&lt;/address&gt;
            &lt;address&gt;10.1.1.22:5703&lt;/address&gt;
        &lt;/cluster-members&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  network:
    cluster-members:
      - 10.1.1.21
      - 10.1.1.22:5703</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
ClientNetworkConfig networkConfig = clientConfig.getNetworkConfig();
networkConfig.addAddress("10.1.1.21", "10.1.1.22:5703");</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the port part is omitted, then 5701, 5702 and 5703 are tried in a random order.</p>
</div>
<div class="paragraph">
<p>You can provide multiple addresses with ports provided or not, as seen above.
The provided list is shuffled and tried in random order.
Its default value is <strong>localhost</strong>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you have multiple members on a single machine and you are using
<a href="#java-client-operation-modes">unisocket clients</a>, we recommend you to set explicit
<a href="#port">ports</a> for each member. Then you should provide those ports in your client configuration
when you give the member addresses (using the <code>address</code> configuration element or
<code>addAddress</code> method as exemplified above). This provides faster connections between clients and members. Otherwise,
all the load coming from your clients may go through a single member.
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_setting_outbound_ports"><a class="anchor" href="#_setting_outbound_ports"></a>Setting Outbound Ports</h6>
<div class="paragraph">
<p>You may want to restrict outbound ports to be used by Hazelcast-enabled applications.
To fulfill this requirement, you can configure Hazelcast Java client to use only defined outbound ports.
The following are example configurations.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;network&gt;
        &lt;outbound-ports&gt;
            &lt;!-- ports between 34700 and 34710 --&gt;
            &lt;ports&gt;34700-34710&lt;/ports&gt;
            &lt;!-- comma separated ports --&gt;
            &lt;ports&gt;34700,34701,34702,34703&lt;/ports&gt;
            &lt;ports&gt;34700,34705-34710&lt;/ports&gt;
        &lt;/outbound-ports&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  network:
    outbound-ports:
      - 34700-34710
      - 34700,34701,34702,34703
      - 34700,34705-34710</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">...
NetworkConfig networkConfig = config.getNetworkConfig();
// ports between 34700 and 34710
networkConfig.addOutboundPortDefinition("34700-34710");
// comma separated ports
networkConfig.addOutboundPortDefinition("34700,34701,34702,34703");
networkConfig.addOutboundPort(34705);
...</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can use port ranges and/or comma separated ports.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As shown in the programmatic configuration, you use the method <code>addOutboundPort</code> to
add only one port. If you need to add a group of ports, then use the method <code>addOutboundPortDefinition</code>.</p>
</div>
<div class="paragraph">
<p>In the declarative configuration, the element <code>ports</code> can be used for
both single and multiple port definitions.</p>
</div>
</div>
<div class="sect5">
<h6 id="_setting_smart_routing"><a class="anchor" href="#_setting_smart_routing"></a>Setting Smart Routing</h6>
<div class="paragraph">
<p>Smart routing defines whether the client operation mode is smart or unisocket.
See <a href="#java-client-operation-modes">Java Client Operation Modes</a> to learn about these modes.</p>
</div>
<div class="paragraph">
<p>The following are example configurations.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;network&gt;
        &lt;smart-routing&gt;true&lt;/smart-routing&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  network:
    smart-routing: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
ClientNetworkConfig networkConfig = clientConfig.getNetworkConfig();
networkConfig().setSmartRouting(true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Its default value is <code>true</code> (smart client mode).</p>
</div>
<div class="paragraph">
<p>Note that you need to disable smart routing (<code>false</code>) for the clients which
want to use temporary permissions defined in a member.
See the <a href="#handling-permissions-when-a-new-member-joins">Handling Permissions section</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_enabling_redo_operation"><a class="anchor" href="#_enabling_redo_operation"></a>Enabling Redo Operation</h6>
<div class="paragraph">
<p>It enables/disables redo-able operations as described in
<a href="#handling-failures">Handling Retry-able Operation Failure</a>.
The following are the example configurations.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;network&gt;
        &lt;redo-operation&gt;true&lt;/redo-operation&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  network:
    redo-operation: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
ClientNetworkConfig networkConfig = clientConfig.getNetworkConfig();
networkConfig().setRedoOperation(true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Its default value is <code>false</code> (disabled).</p>
</div>
</div>
<div class="sect5">
<h6 id="_setting_connection_timeout"><a class="anchor" href="#_setting_connection_timeout"></a>Setting Connection Timeout</h6>
<div class="paragraph">
<p>Connection timeout is the timeout value in milliseconds for members to
accept client connection requests. The following are the example configurations.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;network&gt;
        &lt;connection-timeout&gt;5000&lt;/connection-timeout&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  network:
    connection-timeout: 5000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
clientConfig.getNetworkConfig().setConnectionTimeout(5000);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Its default value is <strong>5000</strong> milliseconds.</p>
</div>
</div>
<div class="sect5">
<h6 id="_setting_a_socket_interceptor"><a class="anchor" href="#_setting_a_socket_interceptor"></a>Setting a Socket Interceptor</h6>
<div class="paragraph">
<p><strong class="blue">Hazelcast IMDG Enterprise</strong></p>
</div>
<div class="paragraph">
<p>Following is a client configuration to set a socket intercepter.
Any class implementing <code>com.hazelcast.nio.SocketInterceptor</code> is a socket interceptor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface SocketInterceptor {
    void init(Properties properties);
    void onConnect(Socket connectedSocket) throws IOException;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>SocketInterceptor</code> has two steps. First, it is initialized by the configured properties.
Second, it is informed just after the socket is connected using the <code>onConnect</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SocketInterceptorConfig socketInterceptorConfig = clientConfig
               .getNetworkConfig().getSocketInterceptorConfig();

MyClientSocketInterceptor myClientSocketInterceptor = new MyClientSocketInterceptor();

socketInterceptorConfig.setEnabled(true);
socketInterceptorConfig.setImplementation(myClientSocketInterceptor);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to configure the socket interceptor with a class name instead of an instance,
see the example below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SocketInterceptorConfig socketInterceptorConfig = clientConfig
            .getNetworkConfig().getSocketInterceptorConfig();

socketInterceptorConfig.setEnabled(true);

//These properties are provided to interceptor during init
socketInterceptorConfig.setProperty("kerberos-host","kerb-host-name");
socketInterceptorConfig.setProperty("kerberos-config-file","kerb.conf");

socketInterceptorConfig.setClassName(MyClientSocketInterceptor.class.getName());</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See the <a href="#socket-interceptor">Socket Interceptor section</a> for more information.
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_configuring_network_socket_options"><a class="anchor" href="#_configuring_network_socket_options"></a>Configuring Network Socket Options</h6>
<div class="paragraph">
<p>You can configure the network socket options using <code>SocketOptions</code>. It has the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>socketOptions.setKeepAlive(x)</code>: Enables/disables the <strong>SO_KEEPALIVE</strong> socket option.
Its default value is <code>true</code>.</p>
</li>
<li>
<p><code>socketOptions.setTcpNoDelay(x)</code>: Enables/disables the <strong>TCP_NODELAY</strong> socket option.
Its default value is <code>true</code>.</p>
</li>
<li>
<p><code>socketOptions.setReuseAddress(x)</code>: Enables/disables the <strong>SO_REUSEADDR</strong> socket option.
Its default value is <code>true</code>.</p>
</li>
<li>
<p><code>socketOptions.setLingerSeconds(x)</code>: Enables/disables <strong>SO_LINGER</strong> with the specified linger time in seconds.
Its default value is <code>3</code>.</p>
</li>
<li>
<p><code>socketOptions.setBufferSize(x)</code>: Sets the <strong>SO_SNDBUF</strong> and <strong>SO_RCVBUF</strong> options to the specified value in KB for this Socket.
Its default value is <code>32</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SocketOptions socketOptions = clientConfig.getNetworkConfig().getSocketOptions();
socketOptions.setBufferSize(32)
             .setKeepAlive(true)
             .setTcpNoDelay(true)
             .setReuseAddress(true)
             .setLingerSeconds(3);</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_enabling_client_tlsssl"><a class="anchor" href="#_enabling_client_tlsssl"></a>Enabling Client TLS/SSL</h6>
<div class="paragraph">
<p><strong class="blue">Hazelcast IMDG Enterprise</strong></p>
</div>
<div class="paragraph">
<p>You can use TLS/SSL to secure the connection between the client and the members.
If you want TLS/SSL enabled for the client-cluster connection, you should set <code>SSLConfig</code>.
Once set, the connection (socket) is established out of an TLS/SSL factory defined either by
a factory class name or factory implementation. See the <a href="#tlsssl">TLS/SSL section</a>.</p>
</div>
<div class="paragraph">
<p>As explained in the <a href="#tlsssl">TLS/SSL section</a>, Hazelcast members have keyStores used to
identify themselves (to other members) and Hazelcast clients have trustStore used to
define which members they can trust. The clients also have their keyStores and
members have their trustStores so that the members can
know which clients they can trust: see the <a href="#mutual-authentication">Mutual Authentication section</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_configuring_hazelcast_cloud"><a class="anchor" href="#_configuring_hazelcast_cloud"></a>Configuring Hazelcast Cloud</h6>
<div class="paragraph">
<p>You can connect your Java client to a Hazelcast cluster which is hosted on
<a href="https://hazelcast.com/products/cloud/" target="_blank" rel="noopener">Hazelcast Cloud</a>.
For this, you simply enable the Hazelcast Cloud and specify the cluster&#8217;s discovery token provided by
Hazelcast Cloud while creating the cluster; this allows the Hazelcast cluster to discover your clients.
See the following example configurations.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;network&gt;
        &lt;ssl enabled="true"/&gt;
        &lt;hazelcast-cloud enabled="true"&gt;
            &lt;discovery-token&gt;YOUR_TOKEN&lt;/discovery-token&gt;
        &lt;/hazelcast-cloud&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  network:
    ssl:
      enabled: true
    hazelcast-cloud:
      enabled: true
      discovery-token: YOUR_TOKEN</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig config = new ClientConfig();
ClientNetworkConfig networkConfig = config.getNetworkConfig();
networkConfig.getCloudConfig().setDiscoveryToken("TOKEN").setEnabled(true);
networkConfig.setSSLConfig(new SSLConfig().setEnabled(true));
HazelcastInstance client = HazelcastClient.newHazelcastClient(config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hazelcast Cloud is disabled for the Java client, by default (<code>enabled</code> attribute is <code>false</code>).</p>
</div>
<div class="paragraph">
<p>See this Hazelcast Cloud <a href="https://hazelcast.com/products/cloud/" target="_blank" rel="noopener">web page</a>
for more information on Hazelcast Cloud.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since this is a REST based discovery, you need to enable the REST listener service.
See the <a href="#using-the-rest-endpoint-groups">Using the REST Endpoint Groups section</a> on how to enable REST endpoints.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is advised to enable certificate revocation status JRE-wide, for security reasons.
You need to set the following Java system properties to <code>true</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.sun.net.ssl.checkRevocation</code></p>
</li>
<li>
<p><code>com.sun.security.enableCRLDP</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And you need to set the Java security property as follows:</p>
</div>
<div class="paragraph">
<p><code>Security.setProperty("ocsp.enable", "true")</code></p>
</div>
<div class="paragraph">
<p>You can find more details on the related security topics
<a href="http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#CERTPATH" target="_blank" rel="noopener">here</a> and
<a href="http://docs.oracle.com/javase/6/docs/technotes/guides/security/certpath/CertPathProgGuide.html#AppC" target="_blank" rel="noopener">here</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_configuring_client_for_aws"><a class="anchor" href="#_configuring_client_for_aws"></a>Configuring Client for AWS</h6>
<div class="paragraph">
<p>The example declarative and programmatic configurations below show
how to configure a Java client for connecting to a Hazelcast cluster in AWS.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;network&gt;
        &lt;aws enabled="true"&gt;
            &lt;use-public-ip&gt;true&lt;/use-public-ip&gt;
            &lt;access-key&gt;my-access-key&lt;/access-key&gt;
            &lt;secret-key&gt;my-secret-key&lt;/secret-key&gt;
            &lt;region&gt;us-west-1&lt;/region&gt;
            &lt;host-header&gt;ec2.amazonaws.com&lt;/host-header&gt;
            &lt;security-group-name&gt;hazelcast-sg&lt;/security-group-name&gt;
            &lt;tag-key&gt;type&lt;/tag-key&gt;
            &lt;tag-value&gt;hz-members&lt;/tag-value&gt;
        &lt;/aws&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  network:
    aws:
      enabled: true
      use-public-ip: true
      access-key: my-access-key
      secret-key: my-secret-key
      region: us-west-1
      host-header: ec2.amazonaws.com
      security-group-name: hazelcast-sg
      tag-key: type
      tag-value: hz-members</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        ClientConfig clientConfig = new ClientConfig();
        AwsConfig clientAwsConfig = new AwsConfig();
        clientAwsConfig.setProperty("access-key", "my-access-key")
                .setProperty("secret-key", "my-secret-key")
                .setProperty("region", "us-west-1")
                .setProperty("host-header", "ec2.amazonaws.com")
                .setProperty("security-group-name", "&gt;hazelcast-sg")
                .setProperty("tag-key", "type")
                .setProperty("tag-value", "hz-members")
                .setProperty("iam-role", "s3access")
                .setEnabled(true);
        clientConfig.getNetworkConfig().setAwsConfig(clientAwsConfig);
        HazelcastInstance client = HazelcastClient.newHazelcastClient(clientConfig);</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="#aws-element">aws element section</a> for the descriptions of
the above AWS configuration elements except <code>use-public-ip</code>.</p>
</div>
<div class="paragraph">
<p>If the <code>use-public-ip</code> element is set to <code>true</code>, the private addresses of cluster members
are always converted to public addresses. Also, the client uses public addresses to
connect to the members. In order to use private addresses, set the <code>use-public-ip</code> parameter to <code>false</code>.
Also note that, when connecting outside from AWS, setting the <code>use-public-ip</code> parameter to <code>false</code> causes
the client to not be able to reach the members.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_client_load_balancer"><a class="anchor" href="#_configuring_client_load_balancer"></a>Configuring Client Load Balancer</h5>
<div class="paragraph">
<p><code>LoadBalancer</code> allows you to send operations to one of a number of endpoints (Members).
Its main purpose is to determine the next <code>Member</code> if queried.
It is up to your implementation to use different load balancing policies.
You should implement the interface <code>com.hazelcast.client.LoadBalancer</code> for that purpose.</p>
</div>
<div class="paragraph">
<p>If it is a <a href="#java-client-operation-modes">smart client</a>, only the operations that are not
key-based are routed to the endpoint that is returned by the <code>LoadBalancer</code>.
If it is not a smart client, <code>LoadBalancer</code> is ignored.</p>
</div>
<div class="paragraph">
<p>The following are example configurations.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;load-balancer type=“random”/&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  load-balancer:
    type: random</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
clientConfig.setLoadBalancer(yourLoadBalancer);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_client_listeners"><a class="anchor" href="#_configuring_client_listeners"></a>Configuring Client Listeners</h5>
<div class="paragraph">
<p>You can configure global event listeners using <code>ListenerConfig</code> as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
ListenerConfig listenerConfig = new ListenerConfig(LifecycleListenerImpl);
clientConfig.addListenerConfig(listenerConfig);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
ListenerConfig listenerConfig = new ListenerConfig("com.hazelcast.example.MembershipListenerImpl");
clientConfig.addListenerConfig(listenerConfig);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can add the following types of event listeners:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>LifecycleListener</p>
</li>
<li>
<p>MembershipListener</p>
</li>
<li>
<p>DistributedObjectListener</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_client_near_cache"><a class="anchor" href="#_configuring_client_near_cache"></a>Configuring Client Near Cache</h5>
<div class="paragraph">
<p>The Hazelcast distributed map supports a local Near Cache for remotely stored entries to
increase the performance of local read operations. Since the client always requests data from
the cluster members, it can be helpful in some use cases to configure a Near Cache on the client side.
See the <a href="#near-cache">Near Cache section</a> for a detailed explanation of the Near Cache feature and its configuration.</p>
</div>
</div>
<div class="sect4">
<h5 id="client-cluster-configuration"><a class="anchor" href="#client-cluster-configuration"></a>Configuring Client Cluster</h5>
<div class="paragraph">
<p>Clients should provide a cluster name in order to connect to the cluster.
You can configure it using <code>ClientConfig</code>, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>clientConfig.setClusterName("dev");</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="client-security-configuration"><a class="anchor" href="#client-security-configuration"></a>Configuring Client Security</h5>
<div class="paragraph">
<p>In the cases where the security established with <code>Config</code> is not enough and
you want your clients connecting securely to the cluster, you can use <code>ClientSecurityConfig</code>.
This configuration has a <code>credentials</code> parameter to set the IP address and UID.
See the <a href="https://docs.hazelcast.org/docs/4.1/javadoc/com/hazelcast/client/config/ClientSecurityConfig.html" target="_blank" rel="noopener">ClientSecurityConfig Javadoc</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="client-serialization-configuration"><a class="anchor" href="#client-serialization-configuration"></a>Client Serialization Configuration</h5>
<div class="paragraph">
<p>For the client side serialization, use the Hazelcast configuration.
See the <a href="#serialization">Serialization chapter</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="classloader"><a class="anchor" href="#classloader"></a>Configuring ClassLoader</h5>
<div class="paragraph">
<p>You can configure a custom <code>classLoader</code>.
It is used by the serialization service and to load any class configured in configuration, such as
event listeners or ProxyFactories.</p>
</div>
</div>
<div class="sect4">
<h5 id="configuring-reliable-topic-at-client-side"><a class="anchor" href="#configuring-reliable-topic-at-client-side"></a>Configuring Reliable Topic on the Client Side</h5>
<div class="paragraph">
<p>Normally when a client uses a Hazelcast data structure,
that structure is configured on the member side and the client makes use of that configuration.
For the Reliable Topic structure, this is not the case; since it is backed by Ringbuffer,
you should configure it on the client side. The class used for this configuration is <code>ClientReliableTopicConfig</code>.</p>
</div>
<div class="paragraph">
<p>Here is an example programmatic configuration snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        Config config = new Config();
        RingbufferConfig ringbufferConfig = new RingbufferConfig("default");
        ringbufferConfig.setCapacity(10000000)
                .setTimeToLiveSeconds(5);
        config.addRingBufferConfig(ringbufferConfig);

        ClientConfig clientConfig = new ClientConfig();
        ClientReliableTopicConfig topicConfig = new ClientReliableTopicConfig("default");
        topicConfig.setTopicOverloadPolicy( TopicOverloadPolicy.BLOCK )
                            .setReadBatchSize( 10 );
        clientConfig.addReliableTopicConfig(topicConfig);

        HazelcastInstance hz = Hazelcast.newHazelcastInstance(config);
        HazelcastInstance client = HazelcastClient.newHazelcastClient(clientConfig);
        ITopic topic = client.getReliableTopic(topicConfig.getName());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that, when you create a Reliable Topic structure on your client, a Ringbuffer
(with the same name as the Reliable Topic) is automatically created on the member side,
with its default configuration. See the <a href="#ringbuffer">Configuring Ringbuffer section</a> for the defaults.
You can edit that configuration according to your needs.</p>
</div>
<div class="paragraph">
<p>You can configure a Reliable Topic structure on the client side also declaratively.
The following is the declarative configuration equivalent to the above example:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;ringbuffer name="default"&gt;
        &lt;capacity&gt;10000000&lt;/capacity&gt;
        &lt;time-to-live-seconds&gt;5&lt;/time-to-live-seconds&gt;
    &lt;/ringbuffer&gt;
    &lt;reliable-topic name="default"&gt;
        &lt;topic-overload-policy&gt;BLOCK&lt;/topic-overload-policy&gt;
        &lt;read-batch-size&gt;10&lt;/read-batch-size&gt;
    &lt;/reliable-topic&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  ringbuffer:
    default:
      capacity: 10000000
      time-to-live-seconds: 5
  reliable-topic:
    default:
      topic-overload-policy: BLOCK
      read-batch-size: 10</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java_client_connection_strategy"><a class="anchor" href="#_java_client_connection_strategy"></a>Java Client Connection Strategy</h4>
<div class="paragraph">
<p>You can configure the client&#8217;s starting mode as async or sync using
the configuration element <code>async-start</code>. When it is set to <code>true</code> (async),
Hazelcast creates the client without waiting a connection to the cluster.
In this case, the client instance throws an exception until it connects to the cluster.
If it is <code>false</code>, the client is not created until the cluster is ready to use clients and
a connection with the cluster is established. Its default value is <code>false</code> (sync)</p>
</div>
<div class="paragraph">
<p>You can also configure how the client reconnects to the cluster after a disconnection.
This is configured using the configuration element <code>reconnect-mode</code>; it has three options
(<code>OFF</code>, <code>ON</code> or <code>ASYNC</code>). The option <code>OFF</code> disables the reconnection.
<code>ON</code> enables reconnection in a blocking manner where all the waiting invocations are blocked until
a cluster connection is established or failed.
The option <code>ASYNC</code> enables reconnection in a non-blocking manner where
all the waiting invocations receive a <code>HazelcastClientOfflineException</code>.
Its default value is <code>ON</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When you have <code>ASYNC</code>  as the <code>reconnect-mode</code> and defined a Near Cache for your client,
the client functions <a id="non-stop-client"></a>without interruptions/downtime by communicating the data from its Near Cache,
provided that there is non-expired data in it. See <a href="#configuring-client-near-cache">here</a> to
learn how you can add a Near Cache to your client.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The example declarative and programmatic configurations below show how to configure
a Java client&#8217;s starting and reconnecting modes.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;connection-strategy async-start="true" reconnect-mode="ASYNC" /&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  connection-strategy:
    async-start: true
    reconnect-mode: ASYNC</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
clientConfig.getConnectionStrategyConfig()
            .setAsyncStart(true)
            .setReconnectMode(ClientConnectionStrategyConfig.ReconnectMode.ASYNC);</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_client_connection_retry"><a class="anchor" href="#_configuring_client_connection_retry"></a>Configuring Client Connection Retry</h5>
<div class="paragraph">
<p>When client is disconnected from the cluster, it searches for new connections
to reconnect. You can configure the frequency of the reconnection attempts and
client shutdown behavior using <code>ConnectionRetryConfig</code> (programmatical approach)/
<code>connection-retry</code> (declarative approach).</p>
</div>
<div class="paragraph">
<p>Below are the example configurations for each.</p>
</div>
<div class="paragraph">
<p>Declarative Configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;connection-strategy async-start="false" reconnect-mode="ON"&gt;
        &lt;connection-retry&gt;
            &lt;initial-backoff-millis&gt;1000&lt;/initial-backoff-millis&gt;
            &lt;max-backoff-millis&gt;60000&lt;/max-backoff-millis&gt;
            &lt;multiplier&gt;2&lt;/multiplier&gt;
            &lt;cluster-connect-timeout-millis&gt;50000&lt;/cluster-connect-timeout-millis&gt;
            &lt;jitter&gt;0.2&lt;/jitter&gt;
        &lt;/connection-retry&gt;
    &lt;/connection-strategy&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  connection-strategy:
    async-start: false
    reconnect-mode: ON
    connection-retry:
      initial-backoff-millis: 1000
      max-backoff-millis: 60000
      multiplier: 2
      cluster-connect-timeout-millis: 50000
      jitter: 0.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Programmatic Configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig config = new ClientConfig();
ClientConnectionStrategyConfig connectionStrategyConfig = config.getConnectionStrategyConfig();
ConnectionRetryConfig connectionRetryConfig = connectionStrategyConfig.getConnectionRetryConfig();
connectionRetryConfig.setInitialBackoffMillis(1000)
                     .setMaxBackoffMillis(60000)
                     .setMultiplier(2)
                     .setClusterConnectTimeoutMillis(50000)
                     .setJitter(0.2);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are configuration element descriptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>initial-backoff-millis</code>: Specifies how long to wait (backoff), in milliseconds, after the first failure before retrying.
Its default value is 1000 ms.</p>
</li>
<li>
<p><code>max-backoff-millis</code>: Specifies the upper limit for the backoff in milliseconds.
Its default value is 30000 ms.</p>
</li>
<li>
<p><code>multiplier</code>: Factor to multiply the backoff after a failed retry.
Its default value is 1.</p>
</li>
<li>
<p><code>cluster-connect-timeout-millis</code>: Timeout value in milliseconds for the client to give up to connect to the current cluster
Its default value is 20000.</p>
</li>
<li>
<p><code>jitter</code>: Specifies by how much to randomize backoffs. Its default value is 0.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A pseudo-code is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain"> begin_time = getCurrentTime()
 current_backoff_millis = INITIAL_BACKOFF_MILLIS
 while (TryConnect(connectionTimeout)) != SUCCESS) {
    if (getCurrentTime() - begin_time &gt;= CLUSTER_CONNECT_TIMEOUT_MILLIS) {
         //Give up to connecting to the current cluster and switch to another if exists.
    }
    Sleep(current_backoff_millis + UniformRandom(-JITTER * current_backoff_millis, JITTER * current_backoff_millis))
    current_backoff = Min(current_backoff_millis * MULTIPLIER, MAX_BACKOFF_MILLIS)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that, <code>TryConnect</code> above tries to connect to any member that the client knows,
and for each connection we have a connection timeout; see the
<a href="#setting-connection-timeout">Setting Connection Timeout section</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_blue_green_deployment_and_disaster_recovery"><a class="anchor" href="#_blue_green_deployment_and_disaster_recovery"></a>Blue-Green Deployment and Disaster Recovery</h4>
<div class="paragraph">
<p><strong class="blue">Hazelcast IMDG Enterprise</strong></p>
</div>
<div class="paragraph">
<p>Hazelcast provides disaster recovery for the client-cluster connections and
can use the well-known blue-green mechanism, so that a Java client is automatically
diverted to another cluster on demand or when the intended cluster becomes unavailable.</p>
</div>
<div class="paragraph">
<p>Using the blue-green system, the clients can connect to another cluster automatically
when they are blacklisted from their currently connected cluster.
See the <a href="https://docs.hazelcast.org/docs/management-center/latest/manual/html/index.html#changing-cluster-client-filtering" target="_blank" rel="noopener">Hazelcast Management Center Reference Manual</a> for information on blacklisting the clients.</p>
</div>
<div class="sect4">
<h5 id="_blue_green_mechanism"><a class="anchor" href="#_blue_green_mechanism"></a>Blue-Green Mechanism</h5>
<div class="paragraph">
<p>You can make your clients connect to another cluster by blacklisting them
in a cluster and using the blue-green mechanism. This is basically having two alive clusters,
one of which is active (blue) and the other one is idle (green).</p>
</div>
<div class="paragraph">
<p>When you blacklist a client in a cluster, the client which is disconnected from the cluster
due to this blacklisting, first tries to connect to another member of the same cluster.
This is because the client is not aware if this is a blacklisting or a normal disconnection.</p>
</div>
<div class="paragraph">
<p>The client&#8217;s behavior after this disconnection depends on its
<a href="#java-client-connection-strategy"><code>reconnect-mode</code></a>.
The following are the options when you are using the blue-green mechanism, i.e.,
you have alternative clusters for your clients to connect:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>reconnect-mode</code> is set to <code>ON</code>, the client changes the cluster and
blocks the invocations while doing so.</p>
</li>
<li>
<p>If <code>reconnect-mode</code> is set to <code>ASYNC</code>, the client changes the cluster
in the background and throws <code>ClientOfflineException</code> while doing so.</p>
</li>
<li>
<p>If <code>reconnect-mode</code> is set to <code>OFF</code>, the client does not change the cluster; it shuts down immediately.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Here it could be the case that the whole cluster is restarted.
In this case, the owner member of the client connection in the restarted cluster
rejects the client&#8217;s connection request, since the client is trying to connect to the old cluster.
So, the client needs to search for a new cluster, if available and
according to the blue-green configuration (see the following configuration related sections in this section).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Consider the following notes for the blue-green mechanism (also valid for the disaster
recovery mechanism described in the next section):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When a client disconnects from a cluster and
connects to a new one the <code>InitialMemberEvent</code> and <code>CLIENT_CHANGED_CLUSTER</code> events are fired.</p>
</li>
<li>
<p>When switching clusters, the client reuses its UUID.</p>
</li>
<li>
<p>The client&#8217;s listener service re-registers its listeners to the new cluster;
the listener service opens a new connection to all members in the current
<a href="#client-network">member list</a> and registers the listeners for each connection.</p>
</li>
<li>
<p>The client&#8217;s Near Caches and Continuous Query Caches are cleared when
the client joins a new cluster successfully.</p>
</li>
<li>
<p>If the new cluster&#8217;s partition size is different, the client is rejected by the cluster.
The client is not able to connect to a cluster with different partition count.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_disaster_recovery_mechanism"><a class="anchor" href="#_disaster_recovery_mechanism"></a>Disaster Recovery Mechanism</h5>
<div class="paragraph">
<p>When one of your clusters is gone due to a failure, the connection between
your clients and owner member in that cluster is gone, too.
When a client is disconnected because of a failure in the cluster,
it first tries to connect to another member of that same cluster.</p>
</div>
<div class="paragraph">
<p>The client&#8217;s behavior after this disconnection depends on its
<a href="#java-client-connection-strategy"><code>reconnect-mode</code></a>, and it has the same options
that are described in the above section (Blue-Green Mechanism).</p>
</div>
<div class="paragraph">
<p>If you have provided alternative clusters for your clients to connect,
the client tries to connect to those alternative clusters (depending on the <code>reconnect-mode</code>).</p>
</div>
<div class="paragraph">
<p>When a failover starts, i.e., the client is disconnected and was configured
to connect to alternative clusters, the current <a href="#client-network">member list</a> is not considered;
the client cuts all the connections before attempting to connect to a new cluster and tries the clusters as configured.
See the below configuration related sections.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ordering_of_clusters_when_clients_try_to_connect"><a class="anchor" href="#_ordering_of_clusters_when_clients_try_to_connect"></a>Ordering of Clusters When Clients Try to Connect</h5>
<div class="paragraph">
<p>The order of the clusters, that the client will try to connect
in a blue-green or disaster recovery scenario, is decided by
the order of these cluster declarations as given in the client configuration.</p>
</div>
<div class="paragraph">
<p>Each time the client is disconnected from a cluster and it cannot connect back to the same one,
the configured list is iterated over. Count of these iterations before
the client decides to shut down is provided using the <code>try-count</code> configuration element.
See the following configuration related sections.</p>
</div>
<div class="paragraph">
<p>We didn&#8217;t go over the configuration yet (see the following configuration related sections),
but for the sake of explaining the ordering, assume that you have
<code>client-config1</code>, <code>client-config2</code> and <code>client-config3</code>
in the given order as shown below (in your <code>hazelcast-client-failover</code> XML or YAML file).
This means you have three alternative clusters.</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client-failover&gt;
    &lt;try-count&gt;4&lt;/try-count&gt;
    &lt;clients&gt;
        &lt;client&gt;client-config1.xml&lt;/client&gt;
        &lt;client&gt;client-config2.xml&lt;/client&gt;
        &lt;client&gt;client-config3.xml&lt;/client&gt;
    &lt;/clients&gt;
&lt;/hazelcast-client-failover&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client-failover:
  try-count: 4
  clients:
    - client-config1.yaml
    - client-config2.yaml
    - client-config3.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>And let&#8217;s say the client is disconnected from the cluster
whose configuration is given by <code>client-config2.xml</code>.
Then, the client tries to connect to the next cluster in this list,
whose configuration is given by <code>client-config3.xml</code>. When the end of the list is reached,
which is so in this example, and the client could not connect to <code>client-config3</code>,
then <code>try-count</code> is incremented and the client continues to try to connect starting with <code>client-config1</code>.</p>
</div>
<div class="paragraph">
<p>This iteration continues until the client connects to a cluster or <code>try-count</code> is reached to the configured value.
When the iteration reaches this value and the client still could not connect to a cluster,
it shuts down. Note that, if <code>try-count</code> was set to <code>1</code> in the above example,
and the client could not connect to <code>client-config3</code>, it would shut down since
it already tried once to connect to an alternative cluster.</p>
</div>
<div class="paragraph">
<p>The following sections describe how you can configure the Java client for
blue-green and disaster recovery scenarios.</p>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_using_cname"><a class="anchor" href="#_configuring_using_cname"></a>Configuring Using CNAME</h5>
<div class="paragraph">
<p>Using CNAME, you can change the hostname resolutions and use them dynamically.
Let&#8217;s describe the configuration with examples.</p>
</div>
<div class="paragraph">
<p>Assume that you have two clusters, Cluster A and Cluster B, and two Java clients.</p>
</div>
<div class="paragraph">
<p>First configure the Cluster A members as shown below:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast&gt;
    ...
    &lt;network&gt;
        &lt;join&gt;
            &lt;tcp-ip enabled="true"&gt;
                &lt;member&gt;clusterA.member1&lt;/member&gt;
                &lt;member&gt;clusterA.member2&lt;/member&gt;
            &lt;/tcp-ip&gt;
        &lt;/join&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast:
  network:
    join:
      tcp-ip:
        enabled: true
        members: clusterA.member1,clusterA.member2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, configure the Cluster B members as shown below.</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast&gt;
    ...
    &lt;network&gt;
        &lt;join&gt;
            &lt;tcp-ip enabled="true"&gt;
                &lt;member&gt;clusterB.member1&lt;/member&gt;
                &lt;member&gt;clusterB.member2&lt;/member&gt;
            &lt;/tcp-ip&gt;
        &lt;/join&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast:
  network:
    join:
      tcp-ip:
        enabled: true
        members: clusterB.member1,clusterB.member2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure the two clients as shown below.</p>
</div>
<div class="listingblock primary">
<div class="title">Client 1 XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;cluster-name&gt;cluster-a&lt;/cluster-name&gt;
    &lt;network&gt;
        &lt;cluster-members&gt;
            &lt;address&gt;production1.myproject&lt;/address&gt;
            &lt;address&gt;production2.myproject&lt;/address&gt;
        &lt;/cluster-members&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  cluster-name: cluster-a
  network:
    cluster-members:
      - production1.myproject
      - production2.myproject</code></pre>
</div>
</div>
<div class="listingblock primary">
<div class="title">Client 2 XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;cluster-name&gt;cluster-b&lt;/cluster-name&gt;
    &lt;network&gt;
        &lt;cluster-members&gt;
            &lt;address&gt;production1.myproject&lt;/address&gt;
            &lt;address&gt;production2.myproject&lt;/address&gt;
        &lt;/cluster-members&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  cluster-name: cluster-b
  network:
    cluster-members:
      - production1.myproject
      - production2.myproject</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming that the client configuration file names of the above example clients are
<code>hazelcast-client-c1.xml/yaml</code> and <code>hazelcast-client-c1.xml/yaml</code>, you should configure the
client failover for a blue-green deployment scenario as follows:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client-failover&gt;
    &lt;try-count&gt;4&lt;/try-count&gt;
    &lt;clients&gt;
        &lt;client&gt;hazelcast-client-c1.xml&lt;/client&gt;
        &lt;client&gt;hazelcast-client-c2.xml&lt;/client&gt;
    &lt;/clients&gt;
&lt;/hazelcast-client-failover&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client-failover:
  try-count: 4
  clients:
    - hazelcast-client-c1.yaml
    - hazelcast-client-c2.yaml</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can find the complete Hazelcast client failover
example configuration file (<code>hazelcast-client-failover-full-example</code>)
both in XML and YAML formats including the descriptions of elements and attributes,
in the <code>/bin</code> folder of your Hazelcast download directory.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You should also configure your clients to forget DNS lookups using the
<a href="https://docs.oracle.com/javase/7/docs/technotes/guides/net/properties.html" target="_blank" rel="noopener">networkaddress.cache.ttl</a> JVM parameter.</p>
</div>
<div class="paragraph">
<p>Configure the addresses in your clients' configuration to resolve to hostnames of
Cluster A via CNAME so that the clients will connect to Cluster A when it starts:</p>
</div>
<div class="paragraph">
<p><code>production1.myproject</code> → <code>clusterA.member1</code></p>
</div>
<div class="paragraph">
<p><code>production2.myproject</code> → <code>clusterA.member2</code></p>
</div>
<div class="paragraph">
<p>When you want the clients to switch to the other cluster, change the mapping as follows:</p>
</div>
<div class="paragraph">
<p><code>production1.myproject</code> → <code>clusterB.member1</code></p>
</div>
<div class="paragraph">
<p><code>production2.myproject</code> → <code>clusterB.member2</code></p>
</div>
<div class="paragraph">
<p>Wait for the time you configured using the <code>networkaddress.cache.ttl</code> JVM parameter for
the client JVM to forget the old mapping.</p>
</div>
<div class="paragraph">
<p>Blacklist the clients in Cluster A using the Hazelcast Management Center.</p>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_without_cname"><a class="anchor" href="#_configuring_without_cname"></a>Configuring Without CNAME</h5>
<div class="paragraph">
<p>Let&#8217;s first give example configurations and describe the configuration elements.</p>
</div>
<div class="paragraph">
<p><strong>Declarative Configuration:</strong></p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client-failover&gt;
    &lt;try-count&gt;4&lt;/try-count&gt;
    &lt;clients&gt;
        &lt;client&gt;hazelcast-client-c1.xml&lt;/client&gt;
        &lt;client&gt;hazelcast-client-c2.xml&lt;/client&gt;
    &lt;/clients&gt;
&lt;/hazelcast-client-failover&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client-failover:
  try-count: 4
  clients:
    - hazelcast-client-c1.yaml
    - hazelcast-client-c2.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic Configuration:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig clientConfig = new ClientConfig();
clientConfig.setClusterName("cluster-a");
ClientNetworkConfig networkConfig = clientConfig.getNetworkConfig();
networkConfig.addAddress("10.216.1.18", "10.216.1.19");

ClientConfig clientConfig2 = new ClientConfig();
clientConfig2.setClusterName("cluster-b");
ClientNetworkConfig networkConfig2 = clientConfig2.getNetworkConfig();
networkConfig2.addAddress( "10.214.2.10", "10.214.2.11");

ClientFailoverConfig clientFailoverConfig = new ClientFailoverConfig();
clientFailoverConfig.addClientConfig(clientConfig).addClientConfig(clientConfig2).setTryCount(10)
HazelcastInstance client = HazelcastClient.newHazelcastFailoverClient(clientFailoverConfig);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are the descriptions for the configuration elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>try-count</code>: Count of connection retries by the client to the alternative clusters.
When this value is reached and the client still could not connect to a cluster, the client
shuts down. Note that this value applies to the alternative clusters whose configurations are provided
with the <code>client</code> element. For the above example, two alternative clusters are given
with the <code>try-count</code> set as <code>4</code>. This means the number of connection attempts is
4 x 2 = 8.</p>
</li>
<li>
<p><code>client</code>: Path to the client configuration that corresponds to an alternative cluster that the client will try to connect.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The client configurations must be exactly the same except the following configuration options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SecurityConfig</code></p>
</li>
<li>
<p><code>NetworkConfig.Addresses</code></p>
</li>
<li>
<p><code>NetworkConfig.SocketInterceptorConfig</code></p>
</li>
<li>
<p><code>NetworkConfig.SSLConfig</code></p>
</li>
<li>
<p><code>NetworkConfig.AwsConfig</code></p>
</li>
<li>
<p><code>NetworkConfig.GcpConfig</code></p>
</li>
<li>
<p><code>NetworkConfig.AzureConfig</code></p>
</li>
<li>
<p><code>NetworkConfig.KubernetesConfig</code></p>
</li>
<li>
<p><code>NetworkConfig.EurekaConfig</code></p>
</li>
<li>
<p><code>NetworkConfig.CloudConfig</code></p>
</li>
<li>
<p><code>NetworkConfig.DiscoveryConfig</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also configure it within the Spring context, as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;beans&gt;
    &lt;hz:client-failover id="blueGreenClient" try-count="5"&gt;
        &lt;hz:client&gt;
            &lt;hz:cluster-name name="dev"/&gt;
            &lt;hz:network&gt;
                &lt;hz:member&gt;127.0.0.1:5700&lt;/hz:member&gt;
                &lt;hz:member&gt;127.0.0.1:5701&lt;/hz:member&gt;
            &lt;/hz:network&gt;
        &lt;/hz:client&gt;

        &lt;hz:client&gt;
            &lt;hz:cluster-name name="alternativeClusterName"/&gt;
            &lt;hz:network&gt;
                &lt;hz:member&gt;127.0.0.1:5702&lt;/hz:member&gt;
                &lt;hz:member&gt;127.0.0.1:5703&lt;/hz:member&gt;
            &lt;/hz:network&gt;
        &lt;/hz:client&gt;

    &lt;/hz:client-failover&gt;
&lt;/beans&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java_client_failure_detectors"><a class="anchor" href="#_java_client_failure_detectors"></a>Java Client Failure Detectors</h4>
<div class="paragraph">
<p>The client failure detectors are responsible to determine if a member in the cluster is unreachable or crashed.
The most important problem in the failure detection is to distinguish
whether a member is still alive but slow, or has crashed.
But according to the famous <a href="http://dl.acm.org/citation.cfm?doid=3149.214121" target="_blank" rel="noopener">FLP result</a>,
it is impossible to distinguish a crashed member from a slow one in an asynchronous system.
A workaround to this limitation is to use unreliable failure detectors.
An unreliable failure detector allows a member to suspect that others have failed,
usually based on liveness criteria but it can make mistakes to a certain degree.</p>
</div>
<div class="paragraph">
<p>Hazelcast Java client has two built-in failure detectors: Deadline Failure Detector and
Ping Failure Detector. These client failure detectors work independently from
the member failure detectors, e.g., you do not need to enable the member failure detectors
to benefit from the client ones.</p>
</div>
<div class="sect4">
<h5 id="_client_deadline_failure_detector"><a class="anchor" href="#_client_deadline_failure_detector"></a>Client Deadline Failure Detector</h5>
<div class="paragraph">
<p><em>Deadline Failure Detector</em> uses an absolute timeout for missing/lost heartbeats.
After timeout, a member is considered as crashed/unavailable and marked as suspected.</p>
</div>
<div class="paragraph">
<p><em>Deadline Failure Detector</em> has two configuration properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.client.heartbeat.interval</code>: This is the interval at which client sends
heartbeat messages to members.</p>
</li>
<li>
<p><code>hazelcast.client.heartbeat.timeout</code>: This is the timeout which defines when
a cluster member is suspected, because it has not sent any response back to client requests.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The value of <code>hazelcast.client.heartbeat.interval</code> should be smaller than
that of <code>hazelcast.client.heartbeat.timeout</code>. In addition, the value of system property
<a href="#client-max-no">hazelcast.client.max.no.heartbeat.seconds</a>, which is set on the member side,
should be larger than that of <code>hazelcast.client.heartbeat.interval</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following is a declarative example showing how you can configure the Deadline Failure Detector
for your client (in the client&#8217;s configuration XML file, e.g., <code>hazelcast-client.xml</code>):</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;properties&gt;
        &lt;property name="hazelcast.client.heartbeat.timeout"&gt;60000&lt;/property&gt;
        &lt;property name="hazelcast.client.heartbeat.interval"&gt;5000&lt;/property&gt;
    &lt;/properties&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  properties
    hazelcast.client.heartbeat.timeout: 60000
    hazelcast.client.heartbeat.interval: 5000</code></pre>
</div>
</div>
<div class="paragraph">
<p>And, the following is the equivalent programmatic configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig config = ...;
config.setProperty("hazelcast.client.heartbeat.timeout", "60000");
config.setProperty("hazelcast.client.heartbeat.interval", "5000");
[...]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_client_ping_failure_detector"><a class="anchor" href="#_client_ping_failure_detector"></a>Client Ping Failure Detector</h5>
<div class="paragraph">
<p>In addition to the Deadline Failure Detector, the Ping Failure Detector may be configured on your client.
Please note that this detector is disabled by default. The Ping Failure Detector
operates at Layer 3 of the OSI protocol and provides much quicker and more deterministic
detection of hardware and other lower level events.
When the JVM process has enough permissions to create RAW sockets, the implementation
chooses to rely on ICMP Echo requests. This is preferred.</p>
</div>
<div class="paragraph">
<p>If there are not enough permissions, it can be configured to fallback on attempting
a TCP Echo on port 7. In the latter case, both a successful connection or an explicit rejection
is treated as "Host is Reachable". Or, it can be forced to use only RAW sockets.
This is not preferred as each call creates a heavy weight socket and moreover the Echo service is typically disabled.</p>
</div>
<div class="paragraph">
<p>For the Ping Failure Detector to rely <strong>only</strong> on the ICMP Echo requests,
the following criteria need to be met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Supported OS: as of Java 1.8 only Linux/Unix environments are supported.</p>
</li>
<li>
<p>The Java executable must have the <code>cap_net_raw</code> capability.</p>
</li>
<li>
<p>The file <code>ld.conf</code> must be edited to overcome the rejection by the dynamic
linker when loading libs from untrusted paths.</p>
</li>
<li>
<p>ICMP Echo Requests must not be blocked by the receiving hosts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The details of these requirements are explained in the
<a href="#requirements-and-linuxunix-configuration">Requirements section</a> of
Hazelcast members' <a href="#ping-failure-detector">Ping Failure Detector</a>.</p>
</div>
<div class="paragraph">
<p>If any of the above criteria isn&#8217;t met, then <code>isReachable</code> will always
fallback on TCP Echo attempts on port 7.</p>
</div>
<div class="paragraph">
<p>An example declarative configuration to use the Ping Failure Detector is
as follows (in the client&#8217;s configuration XML file, e.g., <code>hazelcast-client.xml</code>):</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;network&gt;
        &lt;icmp-ping enabled="true"&gt;
            &lt;timeout-milliseconds&gt;1000&lt;/timeout-milliseconds&gt;
            &lt;interval-milliseconds&gt;1000&lt;/interval-milliseconds&gt;
            &lt;ttl&gt;255&lt;ttl&gt;
            &lt;echo-fail-fast-on-startup&gt;false&lt;/echo-fail-fast-on-startup&gt;
            &lt;max-attempts&gt;2&lt;/max-attempts&gt;
        &lt;/icmp-ping&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast-client:
  network:
    icmp-ping:
      enabled: false
      timeout-milliseconds: 1000
      interval-milliseconds: 1000
      ttl: 255
      echo-fail-fast-on-startup: false
      max-attempts: 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>And, the equivalent programmatic configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClientConfig config = ...;

ClientNetworkConfig networkConfig = clientConfig.getNetworkConfig();
ClientIcmpPingConfig clientIcmpPingConfig = networkConfig.getClientIcmpPingConfig();
clientIcmpPingConfig.setIntervalMilliseconds(1000)
        .setTimeoutMilliseconds(1000)
        .setTtl(255)
        .setMaxAttempts(2)
        .setEchoFailFastOnStartup(false)
        .setEnabled(true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are the descriptions of configuration elements and attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: Enables the legacy ICMP detection mode, works cooperatively with
the existing failure detector and only kicks-in after a pre-defined period
has passed with no heartbeats from a member. Its default value is <code>false</code>.</p>
</li>
<li>
<p><code>timeout-milliseconds</code>: Number of milliseconds until a ping attempt is
considered failed if there was no reply. Its default value is <strong>1000</strong> milliseconds.</p>
</li>
<li>
<p><code>max-attempts</code>: Maximum number of ping attempts before the member gets
suspected by the detector. Its default value is <strong>3</strong>.</p>
</li>
<li>
<p><code>interval-milliseconds</code>: Interval, in milliseconds, between each ping attempt.
1000ms (1 sec) is also the minimum interval allowed. Its default value is <strong>1000</strong> milliseconds.</p>
</li>
<li>
<p><code>ttl</code>: Maximum number of hops the packets should go through.
Its default value is <strong>255</strong>. You can set to <strong>0</strong> to use your system&#8217;s default TTL.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the above example configuration, the Ping Failure Detector attempts 2 pings,
one every second, and waits up to 1 second for each to complete.
If there is no successful ping after 2 seconds, the member gets suspected.</p>
</div>
<div class="paragraph">
<p>To enforce the <a href="#requirements-and-linuxunix-configuration">Requirements</a>,
the property <code>echo-fail-fast-on-startup</code> can also be set to <code>true</code>, in which case Hazelcast fails to start if any of the requirements
isn&#8217;t met.</p>
</div>
<div class="paragraph">
<p>Unlike the Hazelcast members, Ping Failure Detector works always in parallel with
Deadline Failure Detector on the clients.
Below is a summary table of all possible configuration combinations of the Ping Failure Detector.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ICMP</th>
<th class="tableblock halign-left valign-top">Fail-Fast</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Linux</th>
<th class="tableblock halign-left valign-top">Windows</th>
<th class="tableblock halign-left valign-top">macOS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parallel ping detector, works in parallel with the configured failure detector.
Checks periodically if members are live (OSI Layer 3) and suspects them immediately,
regardless of the other detectors.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported ICMP Echo if available - Falls back on TCP Echo on port 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported TCP Echo on port 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported ICMP Echo if available - Falls back on TCP Echo on port 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parallel ping detector, works in parallel with the configured failure detector.
Checks periodically if members are live (OSI Layer 3) and suspects them immediately,
regardless of the other detectors.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported - Requires OS Configuration Enforcing ICMP Echo if available - No start up if not available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Supported - Requires root privileges</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_client_system_properties"><a class="anchor" href="#_client_system_properties"></a>Client System Properties</h4>
<div class="paragraph">
<p>There are some advanced client configuration properties to tune some aspects of Hazelcast Client.
You can set them as property name and value pairs through declarative configuration,
programmatic configuration, or JVM system property. See the <a href="#system-properties">System Properties appendix</a>
to learn how to set these properties.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When you want to reconfigure a system property, you need to restart the clients for
which the property is modified.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The table below lists the client configuration properties with their descriptions.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Client System Properties</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property Name</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.cloud.discovery.token</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token to use when discovering the cluster via Hazelcast Cloud.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.concurrent.window.ms</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property needed for concurrency detection so that write through and dynamic response handling
can be done correctly. This property sets the window for a concurrency detection (duration when it signals
that a concurrency has been detected), even if there are no further updates in that window.
Normally in a concurrent system the windows keeps sliding forward so it always remains concurrent.
Setting it too high effectively disables the optimization because once concurrency has been detected
it will keep that way. Setting it too low could lead to suboptimal performance because the system
will try write through and other optimizations even though the system is concurrent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.discovery.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables/disables the Discovery SPI lookup over the old native implementations.
See <a href="#discovery-spi">[discovery-spi]</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.discovery.public.ip.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the discovery joiner to use public IPs from <code>DiscoveredNode</code>.
See <a href="#discovery-spi">[discovery-spi]</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.event.queue.capacity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default value of the capacity of executor that handles the incoming event packets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.event.thread.count</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thread count for handling the incoming event packets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.heartbeat.interval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frequency of the heartbeat messages sent by the clients to members.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.heartbeat.timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout for the heartbeat messages sent by the client to members.
If no messages pass between the client and member within the given time via
this property in milliseconds, the connection will be closed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.invocation.backoff.timeout.millis</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls the maximum timeout, in milliseconds, to wait for an invocation space to be available.
If an invocation cannot be made because there are too many pending invocations,
then an exponential backoff is done to give the system time to deal with
the backlog of invocations. This property controls how long an invocation is
allowed to wait before getting a <code>HazelcastOverloadException</code>.
When set to -1 then <code>HazelcastOverloadException</code> is thrown immediately without any waiting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.invocation.retry.pause.millis</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pause time between each retry cycle of an invocation in milliseconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.invocation.timeout.seconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period, in seconds, to give up the invocation when a member in the member list is not reachable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.io.balancer.interval.seconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval in seconds between each <code>IOBalancer</code>
execution. By default Hazelcast uses 3 threads to read
data from TCP connections and 3 threads to write data to connections.
<code>IOBalancer</code> detects and fixes the fluctuations when these threads are not
utilized equally. The shorter intervals catch I/O imbalances faster, but they cause higher overhead.
A value smaller than 1 disables the balancer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.io.input.thread.count</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls the number of I/O input threads. Defaults to -1, i.e., the system decides.
If the client is a smart client, it defaults to 3, otherwise it defaults to 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.io.output.thread.count</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls the number of I/O output threads. Defaults to -1, i.e., the system decides.
If the client is a smart client, it defaults to 3, otherwise it defaults to 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.io.write.through</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optimization that allows sending of packets over the network to be done on the calling thread if the
conditions are right. This can reduce the latency and increase the performance for low threaded environments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.max.concurrent.invocations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer.MAX_VALUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum allowed number of concurrent invocations. You can apply a constraint on
the number of concurrent invocations in order to prevent the system from overloading.
If the maximum number of concurrent invocations is exceeded and a new invocation comes in,
Hazelcast throws <code>HazelcastOverloadException</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.metrics.collection.frequency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frequency, in seconds, of the <a href="#metrics">metrics</a> collection cycle. Note that
the preferred way for controlling this setting is <a href="#metrics-configuration">Metrics Configuration</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.metrics.debug.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables collecting debug metrics if set to <code>true</code>, disables it otherwise.
Note that this is meant to be enabled only if diagnostics is enabled, since currently only diagnostics consumes the debug metrics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.metrics.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables the <a href="#metrics">metrics collection</a> if set to <code>true</code>, disables it otherwise. Note that the preferred way for
controlling this setting is <a href="#metrics-configuration">Metrics Configuration</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.metrics.jmx.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables exposing the collected <a href="#metrics">metrics</a> over JMX if set to <code>true</code>, disables it otherwise. Note that
the preferred way for controlling this setting is <a href="#metrics-configuration">Metrics Configuration</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.operation.backup.timeout.millis</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If an operation has backups, this property specifies how long the invocation will wait for acks from the backup replicas.
If acks are not received from some backups, there will not be any rollback on other successful replicas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.operation.fail.on.indeterminate.state</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When this configuration is enabled, if an operation has sync backups and acks are not received from backup replicas
in time, or the member which owns primary replica of the target partition leaves the cluster, then the invocation fails
with <code>IndeterminateOperationStateException</code>. However, even if the invocation fails,
there will not be any rollback on other successful replicas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.response.thread.count</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of the response threads.
By default, there are two response threads; this gives stable and good performance.
If set to 0, the response threads are bypassed and the response handling is done
on the I/O threads. Under certain conditions this can give a higher throughput, but
setting to 0 should be regarded as an experimental feature.
If set to 0, the IO_OUTPUT_THREAD_COUNT is really going to matter because the
inbound thread will have more work to do. By default when TLS is not enabled,
there is just one inbound thread.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.response.thread.dynamic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables dynamic switching between processing the responses on the I/O threads and offloading the response threads.
Under certain conditions (single threaded clients) processing on the I/O
thread can increase the performance because useless handover to the response
thread is removed. Also the response thread is not created until it is needed.
Especially for ephemeral clients, reducing the threads can lead to
increased performance and reduced memory usage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.shuffle.member.list</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The client shuffles the given member list to prevent all the clients to connect
to the same member when this property is <code>true</code>. When it is set to <code>false</code>,
the client tries to connect to the members in the given order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.statistics.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <code>true</code>, it enables collecting the client statistics and sending them to the cluster.
When it is <code>true</code> you can monitor the clients that are connected to your Hazelcast cluster,
using Hazelcast Management Center. See the
<a href="https://docs.hazelcast.org/docs/management-center/latest/manual/html/index.html#monitoring-clients" target="_blank" rel="noopener">Monitoring Clients section</a>
in the Hazelcast Management Center Reference Manual for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hazelcast.client.statistics.period.seconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period in seconds the client statistics are collected and sent to the cluster.
See the <a href="https://docs.hazelcast.org/docs/management-center/latest/manual/html/index.html#monitoring-clients" target="_blank" rel="noopener">Monitoring Clients section</a>
in the Hazelcast Management Center Reference Manual for more information on the client statistics.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_using_high_density_memory_store_with_java_client"><a class="anchor" href="#_using_high_density_memory_store_with_java_client"></a>Using High-Density Memory Store with Java Client</h4>
<div class="paragraph">
<p><strong class="navy">Hazelcast IMDG Enterprise HD</strong></p>
</div>
<div class="paragraph">
<p>If you have <strong class="navy">Hazelcast IMDG Enterprise HD</strong>, your Hazelcast Java client&#8217;s Near Cache
can benefit from the High-Density Memory Store.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s recall the Java client&#8217;s Near Cache configuration
(see the <a href="#configuring-client-near-cache">Configuring Client Near Cache section</a>)
<strong>without</strong> High-Density Memory Store:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;near-cache name="MENU"&gt;
        &lt;eviction size="2000" eviction-policy="LFU"/&gt;
        &lt;time-to-live-seconds&gt;0&lt;/time-to-live-seconds&gt;
        &lt;max-idle-seconds&gt;0&lt;/max-idle-seconds&gt;
        &lt;invalidate-on-change&gt;true&lt;/invalidate-on-change&gt;
        &lt;in-memory-format&gt;OBJECT&lt;/in-memory-format&gt;
    &lt;/near-cache&gt;
    ...
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can configure this Near Cache to use Hazelcast&#8217;s High-Density Memory Store
by setting the in-memory format to NATIVE. See the following configuration example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast-client&gt;
    ...
    &lt;near-cache&gt;
        &lt;eviction size="1000" max-size-policy="ENTRY_COUNT" eviction-policy="LFU"/&gt;
        &lt;time-to-live-seconds&gt;0&lt;/time-to-live-seconds&gt;
        &lt;max-idle-seconds&gt;0&lt;/max-idle-seconds&gt;
        &lt;invalidate-on-change&gt;true&lt;/invalidate-on-change&gt;
        &lt;in-memory-format&gt;NATIVE&lt;/in-memory-format&gt;
    &lt;/near-cache&gt;
&lt;/hazelcast-client&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;eviction&gt;</code> element has the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>size</code>: Maximum size (entry count) of the Near Cache.</p>
</li>
<li>
<p><code>max-size-policy</code>: Maximum size policy for eviction of the Near Cache.
Available values are as follows:</p>
<div class="ulist">
<ul>
<li>
<p>ENTRY_COUNT: Maximum entry count per member.</p>
</li>
<li>
<p>USED_NATIVE_MEMORY_SIZE: Maximum used native memory size in megabytes.</p>
</li>
<li>
<p>USED_NATIVE_MEMORY_PERCENTAGE: Maximum used native memory percentage.</p>
</li>
<li>
<p>FREE_NATIVE_MEMORY_SIZE: Minimum free native memory size to trigger cleanup.</p>
</li>
<li>
<p>FREE_NATIVE_MEMORY_PERCENTAGE: Minimum free native memory percentage to trigger cleanup.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>eviction-policy</code>: Eviction policy configuration. Its default values is NONE.
Available values are as follows:</p>
<div class="ulist">
<ul>
<li>
<p>NONE: No items are evicted and the <code>size</code> property is ignored.
You still can combine it with time-to-live-seconds.</p>
</li>
<li>
<p>LRU: Least Recently Used.</p>
</li>
<li>
<p>LFU: Least Frequently Used.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Keep in mind that you should have already enabled the High-Density Memory Store
usage for your client, using the <code>&lt;native-memory&gt;</code> element in the client&#8217;s configuration.</p>
</div>
<div class="paragraph">
<p>See the <a href="#high-density-memory-store">High-Density Memory Store section</a>
for more information on Hazelcast&#8217;s High-Density Memory Store feature.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="c-client"><a class="anchor" href="#c-client"></a>C++ Client</h3>
<div class="paragraph">
<p>You can use the native C&#43;&#43; client to connect to Hazelcast cluster members and
perform almost all operations that a member can perform.
Clients differ from members in that clients do not hold data. The C&#43;&#43; client is
by default a smart client, i.e., it knows where the data is and asks directly for the correct member.
You can disable this feature (using the <code>ClientConfig::setSmart</code> method) if you do not want
the clients to connect to every member.</p>
</div>
<div class="paragraph">
<p>The features of C&#43;&#43; clients are listed below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Access to distributed data structures (IMap, IQueue, MultiMap, ITopic, etc.).</p>
</li>
<li>
<p>Access to transactional distributed data structures (TransactionalMap, TransactionalQueue, etc.).</p>
</li>
<li>
<p>Ability to add cluster listeners to a cluster and entry/item listeners to distributed data structures.</p>
</li>
<li>
<p>Distributed synchronization mechanisms with ILock, ISemaphore and ICountDownLatch.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See Hazelcast C++ client&#8217;s own GitHub <a href="https://github.com/hazelcast/hazelcast-cpp-client" target="_blank" rel="noopener">repo</a>
for information on setting the client up, installing and compiling it,
its serialization support and APIs such as raw pointer and query.
You can also find <a href="https://github.com/hazelcast/hazelcast-cpp-client/tree/master/examples" target="_blank" rel="noopener">code samples</a>
for this client in this repo.</p>
</div>
</div>
<div class="sect2">
<h3 id="net-client"><a class="anchor" href="#net-client"></a>.NET Client</h3>
<div class="paragraph">
<p>You can use the native .NET client to connect to Hazelcast client members.
You need to add <code>HazelcastClient3x.dll</code> into your .NET project references.
The API is very similar to the Java native client.</p>
</div>
<div class="paragraph">
<p>See Hazelcast .NET client&#8217;s own GitHub <a href="https://github.com/hazelcast/hazelcast-csharp-client" target="_blank" rel="noopener">repo</a>
for information on configuring and starting the client.
You can also find <a href="https://github.com/hazelcast/hazelcast-csharp-client/tree/master/Hazelcast.Examples" target="_blank" rel="noopener">code samples</a>
for this client in this repo.</p>
</div>
</div>
<div class="sect2">
<h3 id="rest-client"><a class="anchor" href="#rest-client"></a>REST Client</h3>
<div class="paragraph">
<p>Hazelcast provides a REST interface: it provides an HTTP service
in each cluster member so that you can access your data
structures and cluster using the HTTP protocol.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>REST service is disabled in the configuration by default.
You should enable it on your cluster members to use the REST client
as follows:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast&gt;
    ...
    &lt;network&gt;
        &lt;rest-api enabled="true"&gt;
        ...
        &lt;/rest-api&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast:
  network:
    rest-api:
      enabled: true</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Hazelcast uses grouped endpoints to provide the communication
via REST interface. In this section, as an example, we show various operations
that are performed on the <strong>data structures</strong> in a cluster using the REST calls.
For these operations to work, in addition to enabling the REST service as shown above,
you also need to enable the <code>DATA</code> endpoint group which allows accessing the data structures,
as shown below:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast&gt;
    ...
    &lt;network&gt;
        &lt;rest-api enabled="true"&gt;
            &lt;endpoint-group name="DATA" enabled="true"/&gt;
        &lt;/rest-api&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast:
  network:
    rest-api:
      enabled: true
      endpoint-groups:
        DATA:
          enabled: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="#using-the-rest-endpoint-groups">Using the REST Endpoint Groups section</a> for details
and to learn about the other endpoint groups Hazelcast offers.</p>
</div>
<div class="paragraph">
<p>In terms of data structures, currently maps and queues are supported.
Assuming <code>mapName</code> and <code>queueName</code> are already configured in your Hazelcast,
the structure of REST calls is shown below:</p>
</div>
<div class="paragraph">
<p><code>http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName/key</code></p>
</div>
<div class="paragraph">
<p><code>http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/queues/queueName</code></p>
</div>
<div class="paragraph">
<p>For the operations to be performed, standard REST conventions for HTTP calls are used.</p>
</div>
<div class="paragraph">
<p>All parameters that are used in REST API URLs, such as
the distributed data structure and key names, must be
<a href="https://en.wikipedia.org/wiki/Percent-encoding" target="_blank" rel="noopener">URL encoded</a>
when composing a call. As an example, <code>name.with/special@chars</code>
parameter value would be encoded as <code>name.with%2Fspecial%40chars</code>.</p>
</div>
<div class="sect3">
<h4 id="_rest_client_getpostdelete_examples"><a class="anchor" href="#_rest_client_getpostdelete_examples"></a>REST Client GET/POST/DELETE Examples</h4>
<div class="paragraph">
<p>All of the requests below can return one of the following responses in case of a failure.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the HTTP request syntax is not known, the following response is returned.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>HTTP/1.1 400 Bad Request
Content-Length: 0</code></pre>
</div>
</div>
</li>
<li>
<p>In case of an unexpected exception, the following response is returned.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt; HTTP/1.1 500 Internal Server Error
&lt; Content-Length: 0</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_creatingupdating_entries_in_a_map_for_rest_client"><a class="anchor" href="#_creatingupdating_entries_in_a_map_for_rest_client"></a>Creating/Updating Entries in a Map for REST Client</h5>
<div class="paragraph">
<p>You can put a new <code>key1/value1</code> entry into a map by using <code>POST</code> call to
<code>http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName/key1</code> URL.
This call&#8217;s content body should contain the value of the key.
Also, if the call contains the MIME type, Hazelcast stores this information, too.</p>
</div>
<div class="paragraph">
<p>An example <code>POST</code> call is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v -H "Content-Type: text/plain" -d "bar"
    http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName/foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>It returns the following response if successful:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 200 OK
&lt; Content-Length: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your <code>POST</code> call has a trailing slash, Hazelcast will strip it so that it is not appended to the key string. So if you send this <code>POST</code> call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v -H "Content-Type: text/plain" -d "bar"
    http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName/foo/</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>POST</code> call will instead be processed as below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v -H "Content-Type: text/plain" -d "bar"
    http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName/foo</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_retrieving_entries_from_a_map_for_rest_client"><a class="anchor" href="#_retrieving_entries_from_a_map_for_rest_client"></a>Retrieving Entries from a Map for REST Client</h5>
<div class="paragraph">
<p>If you want to retrieve an entry, you can use a <code>GET</code> call
to <code>http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName/key1</code>.
You can also retrieve this entry from another member of your cluster, such as
<code>http://&lt;another member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName/key1</code>.</p>
</div>
<div class="paragraph">
<p>An example of a <code>GET</code> call is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl -X GET http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName/foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>It returns the following response if there is a corresponding value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/plain
&lt; Content-Length: 3
bar</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>GET</code> call returned a value, its length and also the MIME type
(<code>text/plain</code>) since the POST call example shown above included the MIME type.</p>
</div>
<div class="paragraph">
<p>It returns the following if there is no mapping for the given key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 204 No Content
&lt; Content-Length: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly to the <code>POST</code> call, Hazelcast will strip the trailing slash from your <code>GET</code> call.</p>
</div>
</div>
<div class="sect4">
<h5 id="_removing_entries_from_a_map_for_rest_client"><a class="anchor" href="#_removing_entries_from_a_map_for_rest_client"></a>Removing Entries from a Map for REST Client</h5>
<div class="paragraph">
<p>You can use a <code>DELETE</code> call to remove an entry. An example <code>DELETE</code> call is shown below with its response.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v -X DELETE http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName/foo</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt; HTTP/1.1 200 OK
&lt; Content-Length: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you leave the key empty as follows, the <code>DELETE</code> call deletes all entries from the map.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v -X DELETE http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/maps/mapName</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 200 OK
&lt; Content-Length: 0</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_offering_items_on_a_queue_for_rest_client"><a class="anchor" href="#_offering_items_on_a_queue_for_rest_client"></a>Offering Items on a Queue for REST Client</h5>
<div class="paragraph">
<p>You can use a <code>POST</code> call to create an item on the queue. An example is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v -H "Content-Type: text/plain" -d "foo"
    http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/queues/myEvents</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above call is equivalent to <code>HazelcastInstance.getQueue("myEvents").offer("foo");</code>.</p>
</div>
<div class="paragraph">
<p>It returns the following if successful:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 200 OK
&lt; Content-Length: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>It returns the following if the queue is full and the item is not able to be offered to the queue:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 503 Service Unavailable
&lt; Content-Length: 0</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_retrieving_items_from_a_queue_for_rest_client"><a class="anchor" href="#_retrieving_items_from_a_queue_for_rest_client"></a>Retrieving Items from a Queue for REST Client</h5>
<div class="paragraph">
<p>You can use a <code>DELETE</code> call for retrieving items from a queue.
Note that you should state the poll timeout while polling for queue events by an extra path parameter.</p>
</div>
<div class="paragraph">
<p>An example is shown below (<strong>10</strong> being the timeout value).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v -X DELETE \http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/queues/myEvents/10</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above call is equivalent to <code>HazelcastInstance.getQueue("myEvents").poll(10, SECONDS);</code>.
Below is the response.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/plain
&lt; Content-Length: 3
foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the timeout is reached, the response is <code>No Content</code> success, i.e.,
there is no item on the queue to be returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 204 No Content
&lt; Content-Length: 0</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_getting_the_size_of_the_queue_for_rest_client"><a class="anchor" href="#_getting_the_size_of_the_queue_for_rest_client"></a>Getting the size of the queue for REST Client</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v -X GET \http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/queues/myEvents/size</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above call is equivalent to <code>HazelcastInstance.getQueue("myEvents").size();</code>.
Below is an example response.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/plain
&lt; Content-Length: 1
5</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_checking_the_status_of_the_cluster_for_rest_client"><a class="anchor" href="#_checking_the_status_of_the_cluster_for_rest_client"></a>Checking the Status of the Cluster for REST Client</h4>
<div class="paragraph">
<p>Besides the above operations, you can check the status of your cluster,
an example of which is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/cluster</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 200 OK

{
  "members": [
    {
      "address": "&lt;member IP address&gt;:&lt;port&gt;",
      "liteMember": false,
      "localMember": true,
      "uuid": "73f5d6ad-7b51-4e74-bd74-15b2e7de7edd",
      "memberVersion": "4.0.0"
    },
    {
      "address": "&lt;another member IP address&gt;:&lt;port&gt;",
      "liteMember": false,
      "localMember": false,
      "uuid": "e8b41ac6-9db9-43f1-9e98-8b0392891560",
      "memberVersion": "4.0.0"
    },
    {
      "address": "&lt;another member IP address&gt;:&lt;port&gt;",
      "liteMember": false,
      "localMember": false,
      "uuid": "c6929312-d4d3-4527-83bc-474c229394d6",
      "memberVersion": "4.0.0"
    }
  ],
  "connectionCount": 1,
  "allConnectionCount": 3
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_checking_the_name_of_the_instance_for_rest_client"><a class="anchor" href="#_checking_the_name_of_the_instance_for_rest_client"></a>Checking the Name of the Instance for REST Client</h4>
<div class="paragraph">
<p>Additionally, you can check the name of any instance of your cluster.
An example is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">$ curl -v http://&lt;member IP address&gt;:&lt;port&gt;/hazelcast/rest/instance</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">&lt; HTTP/1.1 200 OK
&lt; Content-Length: 27

{"name":"adoring_brattain"}</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>RESTful access is provided through any member of your cluster.
You can even put an HTTP load-balancer in front of your cluster members for load balancing and fault tolerance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need to handle the failures on REST polls as there is no transactional guarantee.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_memcache_client"><a class="anchor" href="#_memcache_client"></a>Memcache Client</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Hazelcast Memcache Client only supports ASCII protocol. Binary Protocol is not supported.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A Memcache client written in any language can talk directly to a Hazelcast cluster.
No additional configuration is required.</p>
</div>
<div class="paragraph">
<p>To be able to use a Memcache client, you must enable
the Memcache client request listener service using either one of the following configuration options:</p>
</div>
<div class="paragraph">
<p>1 - Using the <code>network</code> configuration element:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast&gt;
    ...
    &lt;network&gt;
        &lt;memcache-protocol enabled="true"/&gt;
    &lt;/network&gt;
    ...
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast:
  network:
    memcache-protocol:
      enabled: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>2 - Using the <code>advanced-network</code> configuration element:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;hazelcast&gt;
    ...
    &lt;advanced-network&gt;
        &lt;memcache-server-socket-endpoint-config name="memcache"&gt;
            &lt;port auto-increment="false" port-count="10"&gt;6000&lt;/port&gt;
        &lt;/memcache-server-socket-endpoint-config&gt;
    &lt;/advanced-network&gt;
    ...
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">hazelcast:
  advanced-network:
    memcache-server-socket-endpoint-config:
      name: memcache
      port:
        auto-increment: false
        port-count: 10
        port: 6000</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_memcache_client_code_examples"><a class="anchor" href="#_memcache_client_code_examples"></a>Memcache Client Code Examples</h4>
<div class="paragraph">
<p>Assume that your cluster members are as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">Members [5] {
  Member [10.20.17.1:5701]
  Member [10.20.17.2:5701]
  Member [10.20.17.4:5701]
  Member [10.20.17.3:5701]
  Member [10.20.17.5:5701]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assume that you have a PHP application that uses PHP Memcache client to cache things in Hazelcast.
All you need to do is have your PHP Memcache client connect to one of these members.
It does not matter which member the client connects to because
the Hazelcast cluster looks like one giant machine (Single System Image).
Here is a PHP client code example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">&lt;?php
    $memcache = new Memcache;
    $memcache-&gt;connect( '10.20.17.1', 5701 ) or die ( "Could not connect" );
    $memcache-&gt;set( 'key1', 'value1', 0, 3600 );
    $get_result = $memcache-&gt;get( 'key1' ); // retrieve your data
    var_dump( $get_result ); // show it
?&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that Memcache client connects to <code>10.20.17.1</code> and uses port <code>5701</code>.
Here is a Java client code example with SpyMemcached client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">MemcachedClient client = new MemcachedClient(
    AddrUtil.getAddresses( "10.20.17.1:5701 10.20.17.2:5701" ) );
client.set( "key1", 3600, "value1" );
System.out.println( client.get( "key1" ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want your data to be stored in different maps, for example
to utilize per map configuration, you can do that with a map name prefix as in the following example code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">MemcachedClient client = new MemcachedClient(
    AddrUtil.getAddresses( "10.20.17.1:5701 10.20.17.2:5701" ) );
client.set( "map1:key1", 3600, "value1" ); // store to *hz_memcache_map1
client.set( "map2:key1", 3600, "value1" ); // store to hz_memcache_map2
System.out.println( client.get( "key1" ) ); // get from hz_memcache_map1
System.out.println( client.get( "key2" ) ); // get from hz_memcache_map2</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>hz_memcache prefix\_</strong> separates Memcache maps from Hazelcast maps.
If no map name is given, it is stored
in a default map named <strong>hz_memcache_default</strong>.</p>
</div>
<div class="paragraph">
<p>An entry written with a Memcache client can be read by another Memcache client written in another language.</p>
</div>
</div>
<div class="sect3">
<h4 id="_unsupported_operations_for_memcache"><a class="anchor" href="#_unsupported_operations_for_memcache"></a>Unsupported Operations for Memcache</h4>
<div class="ulist">
<ul>
<li>
<p>CAS operations are not supported. In operations that get CAS parameters, such as append, CAS values are ignored.</p>
</li>
<li>
<p>Only a subset of statistics are supported. Below is the list of supported statistic values.</p>
<div class="ulist">
<ul>
<li>
<p>cmd_set</p>
</li>
<li>
<p>cmd_get</p>
</li>
<li>
<p>incr_hits</p>
</li>
<li>
<p>incr_misses</p>
</li>
<li>
<p>decr_hits</p>
</li>
<li>
<p>decr_misses</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_python_client"><a class="anchor" href="#_python_client"></a>Python Client</h3>
<div class="paragraph">
<p>Python Client implementation for Hazelcast. It is implemented using the Hazelcast Open Binary Client Protocol.</p>
</div>
<div class="paragraph">
<p>See Hazelcast Python client&#8217;s GitHub <a href="https://github.com/hazelcast/hazelcast-python-client" target="_blank" rel="noopener">repo</a>
for its documentation and <a href="https://github.com/hazelcast/hazelcast-python-client/tree/master/examples" target="_blank" rel="noopener">code samples</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_node_js_client"><a class="anchor" href="#_node_js_client"></a>Node.js Client</h3>
<div class="paragraph">
<p>Node.js Client implementation for Hazelcast. It is implemented using the Hazelcast Open Binary Client Protocol.</p>
</div>
<div class="paragraph">
<p>See Hazelcast Node.js client&#8217;s GitHub <a href="https://github.com/hazelcast/hazelcast-nodejs-client" target="_blank" rel="noopener">repo</a>
for its documentation and <a href="https://github.com/hazelcast/hazelcast-nodejs-client/tree/master/code_samples" target="_blank" rel="noopener">code samples</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_go_client"><a class="anchor" href="#_go_client"></a>Go Client</h3>
<div class="paragraph">
<p>Go Client implementation for Hazelcast. It is implemented using the Hazelcast Open Binary Client Protocol.</p>
</div>
<div class="paragraph">
<p>See Hazelcast Go client&#8217;s GitHub <a href="https://github.com/hazelcast/hazelcast-go-client" target="_blank" rel="noopener">repo</a>
for its documentation and <a href="https://github.com/hazelcast/hazelcast-go-client/tree/master/sample" target="_blank" rel="noopener">code samples</a>.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<link rel="shortcut icon" href="http://hazelcast.com/images/favicon.png">
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/search.js" id="search-script" data-base-path="../../.." data-page-path="/hazelcast/4.1/develop/hazelcast_clients.html"></script>
<script async src="../../../_/../search-index.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
